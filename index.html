<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florex — Премиальная оптовая продажа цветов</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black: #121212;
            --white: #EDEDED;
            --accent-orange: #cc6054;
            --burnt-terracotta: #cc6054;
            --deep-coral: #F2A497;
            --dusty-olive: #4E5D59;
            --dusty-sage: #687e79;
            --light-sage: #A7B3AD;
            --light-concrete: #C5CEC9;
            --deep-slate: #3E4A49;
            --soft-white: #FFFFFF;
        }
        .hidden-for-guest {
            display: none !important; /* Скрываем элемент */
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--white);
            color: var(--black);
            line-height: 1.6;
            min-height: 100vh;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
        }

        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 60px;
        }

        /* Премиальный хедер */
        header {
            background: #EDEDED;
            border-bottom: 1px solid var(--light-sage);
            padding: 28px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 30px rgba(18, 18, 18, 0.08);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Логотип */
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 23px;
            font-weight: 700;
            color: var(--black);
            text-decoration: none;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-orange);
            border-radius: 50%;
            padding: 8px;
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
        }

        nav ul {
            display: flex;
            gap: 48px;
            list-style: none;
        }

        nav a {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: var(--dusty-olive);
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
            padding: 8px 0;
        }

        nav a:hover {
            color: var(--accent-orange);
            transform: translateY(-2px);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--accent-orange);
            transition: width 0.3s;
            border-radius: 2px;
        }

        nav a:hover::after {
            width: 100%;
        }

        .header-actions {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        /* Иконки */
        .cart-icon {
            position: relative;
            cursor: pointer;
            width: 28px;
            height: 28px;
            transition: all 0.3s;
            background: var(--dusty-olive);
            border-radius: 50%;
            padding: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-icon svg {
            stroke: var(--white);
        }

        .cart-icon:hover {
            transform: scale(1.1) rotate(5deg);
            background: var(--accent-orange);
            box-shadow: 0 6px 20px rgba(211, 84, 44, 0.4);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent-orange);
            color: var(--white);
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(211, 84, 44, 0.4);
        }

        .user-icon {
            cursor: pointer;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: var(--dusty-sage);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(104, 126, 121, 0.3);
        }

        .user-icon:hover {
            background: var(--accent-orange);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(211, 84, 44, 0.4);
        }

        .guest-login {
            cursor: pointer;
            padding: 10px 20px;
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            border-radius: 20px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .guest-login:hover {
            background: var(--burnt-terracotta);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(211, 84, 44, 0.4);
        }

        .lang-switcher {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--white);
            border: 1px solid var(--light-sage);
            border-radius: 20px;
            padding: 4px;
            margin-right: 8px; /* Небольшой отступ от корзины */
        }
        
        .lang-btn {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 13px;
            color: var(--dusty-olive);
            text-decoration: none;
            padding: 6px 14px;
            border-radius: 16px;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: var(--accent-orange);
            color: var(--white);
            box-shadow: 0 2px 8px rgba(211, 84, 44, 0.3);
        }

        .lang-btn:not(.active):hover {
            background: var(--light-concrete);
        }
        /* Кнопки */
        .btn {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            padding: 18px 42px;
            border: none;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--accent-orange);
            color: var(--white);
            box-shadow: 0 6px 20px rgba(211, 84, 44, 0.3);
        }

        .btn-primary:hover {
            background: var(--burnt-terracotta);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(211, 84, 44, 0.4);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--black);
            border: 2px solid var(--light-sage);
            box-shadow: 0 4px 12px rgba(104, 126, 121, 0.1);
        }

        .btn-secondary:hover {
            background: var(--light-concrete);
            border-color: var(--dusty-sage);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(104, 126, 121, 0.2);
        }

        .btn-outline {
            background: transparent;
            color: var(--black);
            border: 2px solid var(--black);
            position: relative;
            z-index: 1;
        }

        .btn-outline::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: var(--black);
            transition: width 0.3s;
            z-index: -1;
        }

        .btn-outline:hover {
            color: var(--white);
        }

        .btn-outline:hover::after {
            width: 100%;
        }

        /* Экраны */
        .screen {
            display: none;
            min-height: calc(100vh - 100px);
        }

        .screen.active {
            display: block;
        }

        /* Экран регистрации */
        .auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 0;
            background: var(--light-concrete);
            position: relative;
            overflow: hidden;
        }

        .auth-container {
            max-width: 520px;
            width: 100%;
            background: var(--white);
            padding: 60px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            border: 1px solid var(--light-sage);
            border-radius: 12px;
            position: relative;
            z-index: 1;
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 48px;
        }

        .auth-logo svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 12px rgba(211, 84, 44, 0.3));
        }

        .auth-logo h1 {
            font-size: 36px;
            margin-bottom: 12px;
            color: var(--black);
        }

        .auth-logo p {
            color: var(--dusty-olive);
            font-size: 16px;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 32px;
            position: relative;
        }

        label {
            display: block;
            font-weight: 700;
            margin-bottom: 12px;
            font-size: 14px;
            letter-spacing: 0.5px;
            color: var(--dusty-olive);
        }

        select, input {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid var(--light-sage);
            background: var(--white);
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            color: var(--black);
            transition: all 0.3s;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(211, 84, 44, 0.15);
            transform: translateY(-2px);
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 24px 0;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            font-size: 14px;
            text-transform: none;
            letter-spacing: 0;
            font-weight: 400;
            color: var(--black);
            line-height: 1.6;
        }

        .checkbox-group a {
            color: var(--accent-orange);
            text-decoration: underline;
        }

        /* SMS подтверждение */
        .sms-verification {
            text-align: center;
        }

        .sms-verification h2 {
            font-size: 32px;
            margin-bottom: 16px;
            color: var(--black);
        }

        .sms-verification p {
            color: var(--dusty-olive);
            margin-bottom: 40px;
            font-size: 16px;
        }

        .sms-code-inputs {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 32px;
        }

        .sms-code-input {
            width: 70px;
            height: 70px;
            text-align: center;
            font-size: 32px;
            font-weight: 700;
            border: 2px solid var(--light-sage);
            padding: 0;
            border-radius: 8px;
            background: var(--white);
            transition: all 0.3s;
        }

        .sms-code-input:focus {
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(211, 84, 44, 0.15);
            transform: translateY(-2px);
        }

        .resend-code {
            color: var(--dusty-olive);
            font-size: 14px;
            margin-top: 24px;
        }

        .resend-code a {
            color: var(--accent-orange);
            text-decoration: underline;
            cursor: pointer;
            font-weight: 600;
        }

        /* Home Screen */
        .hero {
            padding: 100px 0 120px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero h1 {
            font-size: 64px;
            font-weight: 700;
            margin-bottom: 24px;
            letter-spacing: -1px;
            color: var(--black);
            position: relative;
            z-index: 1;
        }

        .hero p {
            font-size: 20px;
            color: var(--dusty-olive);
            margin-bottom: 60px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 1;
        }

        .selection-card {
            background: var(--white);
            border: 1px solid var(--light-sage);
            padding: 48px;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }

        .selection-card h2 {
            font-size: 24px;
            margin-bottom: 32px;
            text-align: center;
            color: var(--dusty-olive);
        }

        /* Каталог */
/* Новый стиль шапки каталога */
.catalog-header {
    display: flex;
    align-items: center;
    gap: 16px; /* Отступ между поиском и городом */
    margin-bottom: 20px; /* Отступ до фильтров */
    padding: 0;
}

/* Стиль поисковика */
.search-wrapper {
    flex: 1; /* ВАЖНО: Растягивает поиск на всю доступную ширину */
    position: relative;
}

.search-input {
    width: 100%;
    padding: 16px 20px 16px 52px; /* Чуть больше паддинги для "дорогого" вида */
    border: 1px solid transparent; /* Убираем рамку по умолчанию */
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: var(--black);
    background: var(--white);
    /* Добавляем тень для объема */
    box-shadow: 0 4px 20px rgba(0,0,0,0.06); 
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.search-input:hover {
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    transform: translateY(-1px);
}

.search-input:focus {
    outline: none;
    background: var(--white);
    border-color: var(--accent-orange);
    box-shadow: 0 8px 30px rgba(211, 84, 44, 0.15); /* Оранжевое свечение */
}

.search-input::placeholder {
    color: #999;
    font-weight: 400;
}

.search-icon-inside {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    stroke: var(--dusty-olive);
    opacity: 0.7;
}

/* Стиль города (без круга) */
.location-selector {
    background: var(--white);
    padding: 10px 20px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06); /* Тоже с тенью, в стиле поиска */
    height: 52px; /* Высота как у инпута */
    display: flex;
    align-items: center;
    gap: 10px;
    white-space: nowrap;
    transition: all 0.3s;
}
.location-selector:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
}

.location-selector svg {
    stroke: var(--accent-orange); /* Делаем иконку акцентной */
    width: 20px;
    height: 20px;
}

        .catalog-header h1 {
            font-size: 35px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .catalog-info {
            display: flex;
            gap: 32px;
            font-size: 14px;
            color: var(--dusty-olive);
        }

        .catalog-info span {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--white);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid var(--light-sage);
            
        }

        .catalog-controls {
            padding: 32px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filters {
            display: flex;
            gap: 16px;
        }

        .filter-btn {
            padding: 12px 24px;
            background: var(--white);
            border: 2px solid var(--light-sage);
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            border-radius: 6px;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--dusty-sage);
            color: var(--white);
            border-color: var(--dusty-sage);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(104, 126, 121, 0.3);
        }

        .sort-select {
            width: 220px;
            border-radius: 6px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 40px;
            padding: 40px 0 100px;
            padding-top: 10px; /* БЫЛО 40px -> СДЕЛАЛИ 10px. Убрали дыру сверху */
        }

        /* ОБНОВЛЕННЫЕ КАРТОЧКИ ТОВАРОВ - НОВЫЙ ДИЗАЙН */
        .product-card {
            background: var(--white);
            border: 1px solid var(--light-sage);
            cursor: pointer;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product-card:hover {
            border-color: var(--accent-orange);
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 240px;
            background: var(--light-concrete);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        
        .product-status {
            position: absolute;
            top: 16px;
            right: 16px;
            background: var(--white);
            padding: 6px 12px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 20px;
            z-index: 2;
        }

        .product-status.in-stock {
            color: var(--dusty-sage);
            border: 1px solid var(--dusty-sage);
        }

        .product-status.pre-order {
            color: var(--accent-orange);
            border: 1px solid var(--accent-orange);
        }

        .product-info {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            letter-spacing: 0.3px;
            color: var(--black);
            line-height: 1.4;
        }

        /* Терракотовая плашка с количеством */
        .product-quantity-badge {
            background: var(--deep-coral);
            color: var(--white);
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 16px;
            display: inline-block;
            align-self: flex-start;
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
        }

        .product-specs {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            font-size: 13px;
            color: var(--dusty-olive);
        }

        .spec-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .spec-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-brand {
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid var(--light-concrete);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand-logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 16px;
            color: var(--black);
            letter-spacing: 1px;
        }

        .product-price {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--light-concrete);
        }

        .price-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-size: 24px;
            font-weight: 700;
            color: var(--black);
            letter-spacing: -0.5px;
        }

        .price-unit {
            font-size: 13px;
            color: var(--dusty-olive);
            font-weight: 400;
        }

        .price-pack {
            font-size: 16px;
            color: var(--dusty-olive);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 8px;
            border-top: 1px dashed var(--light-concrete);
        }

        .add-to-cart-btn {
            padding: 10px 20px;
            background: var(--black);
            color: var(--white);
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            border-radius: 4px;
            margin-top: 12px;
        }

        .add-to-cart-btn:hover {
            background: var(--accent-orange);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
        }

        /* Детали товара - ОБНОВЛЕННЫЙ ДИЗАЙН */
        .product-detail {
            padding: 60px 0 100px;
        }

        .product-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
        }

        .product-detail-image {
            background: var(--light-concrete);
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .product-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-detail-info {
            padding: 20px 0;
        }

        .product-detail-info h1 {
            font-size: 35px;
            margin-bottom: 16px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .product-article {
            font-size: 14px;
            color: var(--dusty-olive);
            margin-bottom: 32px;
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Терракотовая плашка в деталях */
        .detail-quantity-badge {
            background: var(--deep-coral);
            color: var(--white);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 24px;
            display: inline-block;
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
        }

        .product-detail-specs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin: 40px 0;
            padding: 40px;
            background: var(--light-concrete);
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
            border-radius: 12px;
            border: 1px solid var(--light-sage);
        }

        .spec-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .spec-label {
            font-size: 12px;
            letter-spacing: 0.5px;
            color: var(--dusty-olive);
            font-weight: 600;
        }

        .spec-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--black);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .product-detail-brand {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 32px 0;
            padding: 24px;
            background: var(--white);
            border-radius: 8px;
            border: 1px solid var(--light-sage);
        }

        .brand-logo-large {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 24px;
            color: var(--black);
            letter-spacing: 1px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 40px 0;
        }

        .quantity-label {
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 0.5px;
            color: var(--dusty-olive);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            border: 2px solid var(--light-sage);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-radius: 6px;
            overflow: hidden;
        }

        .quantity-btn {
            width: 48px;
            height: 48px;
            border: none;
            background: var(--white);
            cursor: pointer;
            font-size: 24px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .quantity-btn:hover {
            background: var(--dusty-sage);
            color: var(--white);
        }

        .quantity-input {
            width: 100px;
            height: 48px;
            text-align: center;
            border: none;
            border-left: 2px solid var(--light-sage);
            border-right: 2px solid var(--light-sage);
            font-weight: 600;
            font-size: 18px;
            background: var(--white);
        }

        .product-actions {
            display: flex;
            gap: 16px;
            margin-top: 48px;
        }

        /* Корзина */
        .cart-screen {
            padding: 60px 0 100px;
        }

        .cart-screen h1 {
            font-size: 35px;
            margin-bottom: 48px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .cart-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 48px;
        }

        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .cart-item {
            display: grid;
            grid-template-columns: 140px 1fr auto;
            gap: 28px;
            padding: 32px;
            border: 2px solid var(--light-concrete);
            background: var(--white);
            transition: all 0.3s;
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
            border-radius: 12px;
        }

        .cart-item:hover {
            border-color: var(--light-sage);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }

        .cart-item-image {
            width: 140px;
            height: 140px;
            background: var(--light-concrete);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            border-radius: 8px;
        }

        .cart-item-info h3 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--black);
        }

        .cart-item-meta {
            font-size: 14px;
            color: var(--dusty-olive);
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 20px;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .cart-item-actions {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-end;
        }

        .cart-item-price {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--black);
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--dusty-olive);
            cursor: pointer;
            font-size: 13px;
            text-decoration: underline;
            transition: color 0.3s;
            font-weight: 500;
        }

        .remove-btn:hover {
            color: var(--accent-orange);
        }

        /* Сводка корзины */
        .cart-summary {
            background: var(--dusty-sage);
            color: var(--white);
            padding: 40px;
            height: fit-content;
            position: sticky;
            top: 120px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            border-radius: 12px;
        }

        .cart-summary h2 {
            font-size: 26px;
            margin-bottom: 32px;
            letter-spacing: 0.5px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 15px;
        }

        .summary-row:last-of-type {
            border-bottom: none;
            padding-top: 28px;
            margin-top: 16px;
            border-top: 2px solid var(--white);
            font-size: 24px;
            font-weight: 700;
        }

        .promo-code {
            margin-top: 28px;
            display: flex;
            gap: 12px;
        }

        .promo-input {
            flex: 1;
            padding: 14px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-radius: 6px;
        }

        .promo-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .promo-btn {
            padding: 14px 24px;
            background: var(--white);
            color: var(--dusty-sage);
            border: none;
            cursor: pointer;
            font-weight: 700;
            letter-spacing: 0.5px;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .promo-btn:hover {
            background: var(--accent-orange);
            color: var(--white);
        }

        .checkout-btn {
            width: 100%;
            margin-top: 28px;
            background: var(--accent-orange);
            padding: 18px;
            border-radius: 6px;
        }

        .checkout-btn:hover {
            background: var(--burnt-terracotta);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(211, 84, 44, 0.4);
        }

        /* Оформление заказа */
        .checkout-screen {
            padding: 60px 0 100px;
        }

        .checkout-screen h1 {
            font-size: 35px;
            margin-bottom: 48px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .checkout-grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 60px;
        }

        .checkout-section {
            margin-bottom: 48px;
        }

        .checkout-section h2 {
            font-size: 26px;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 16px;
            letter-spacing: 0.3px;
            color: var(--black);
        }

        .step-number {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: var(--accent-orange);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
        }

        /* Таймлайн заказа */
        .order-timeline {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 40px 0;
            padding: 20px 0;
        }

        .order-timeline::before {
            content: '';
            position: absolute;
            top: 30px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--light-sage);
            z-index: 1;
        }

        .timeline-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .timeline-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--light-sage);
            margin-bottom: 12px;
            border: 3px solid var(--white);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .timeline-step.completed .timeline-dot {
            background: var(--dusty-sage);
        }

        .timeline-step.active .timeline-dot {
            background: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(211, 84, 44, 0.3);
        }

        .timeline-label {
            font-size: 12px;
            text-align: center;
            color: var(--dusty-olive);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .timeline-step.completed .timeline-label {
            color: var(--dusty-sage);
        }

        .timeline-step.active .timeline-label {
            color: var(--accent-orange);
        }

        .timeline-date {
            font-size: 11px;
            color: var(--light-sage);
            margin-top: 4px;
        }

        .delivery-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .delivery-option {
            padding: 28px;
            border: 2px solid var(--light-sage);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
            border-radius: 8px;
            background: var(--white);
        }

        .delivery-option:hover {
            border-color: var(--dusty-sage);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .delivery-option.selected {
            border-color: var(--accent-orange);
            background: rgba(211, 84, 44, 0.05);
            box-shadow: 0 8px 25px rgba(211, 84, 44, 0.15);
        }

        .radio {
            width: 24px;
            height: 24px;
            border: 2px solid var(--light-sage);
            border-radius: 50%;
            position: relative;
            transition: all 0.3s;
        }

        .delivery-option.selected .radio {
            border-color: var(--accent-orange);
            border-width: 3px;
        }

        .delivery-option.selected .radio::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--accent-orange);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .delivery-info {
            flex: 1;
        }

        .delivery-info h3 {
            font-size: 18px;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--black);
        }

        .delivery-info p {
            font-size: 14px;
            color: var(--dusty-olive);
            line-height: 1.6;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .payment-method {
            padding: 32px;
            border: 2px solid var(--light-sage);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
            border-radius: 8px;
            background: var(--white);
        }

        .payment-method:hover {
            border-color: var(--dusty-sage);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .payment-method.selected {
            border-color: var(--accent-orange);
            background: rgba(211, 84, 44, 0.05);
            box-shadow: 0 8px 25px rgba(211, 84, 44, 0.15);
        }

        .payment-icon {
            font-size: 40px;
            margin-bottom: 16px;
        }

        .payment-method h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--black);
        }

        /* Сводка заказа */
        .order-summary {
            background: var(--light-concrete);
            padding: 40px;
            height: fit-content;
            position: sticky;
            top: 120px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-radius: 12px;
            border: 1px solid var(--light-sage);
        }

        .order-summary h2 {
            font-size: 26px;
            margin-bottom: 32px;
            letter-spacing: 0.5px;
            color: var(--black);
        }

        .order-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 32px;
            max-height: 320px;
            overflow-y: auto;
        }

        .order-item {
            display: flex;
            gap: 16px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-sage);
        }

        .order-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .order-item-image {
            width: 70px;
            height: 70px;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-radius: 6px;
        }

        .order-item-info {
            flex: 1;
        }

        .order-item-info h4 {
            font-size: 15px;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--black);
        }

        .order-item-info p {
            font-size: 13px;
            color: var(--dusty-olive);
        }

        .order-item-price {
            font-weight: 700;
            font-size: 17px;
            color: var(--black);
        }

        .place-order-btn {
            width: 100%;
            padding: 20px;
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            box-shadow: 0 6px 20px rgba(211, 84, 44, 0.3);
            border-radius: 6px;
        }

        .place-order-btn:hover {
            background: var(--burnt-terracotta);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(211, 84, 44, 0.4);
        }

        /* Оплата */
        .payment-screen {
            padding: 60px 0 100px;
        }

        .payment-container {
            max-width: 640px;
            margin: 0 auto;
        }

        .payment-container h1 {
            font-size: 35px;
            margin-bottom: 16px;
            text-align: center;
            letter-spacing: -1px;
            color: var(--black);
        }

        .order-number {
            text-align: center;
            font-size: 16px;
            color: var(--dusty-olive);
            margin-bottom: 48px;
        }

        .payment-card {
            background: var(--white);
            border: 2px solid var(--light-sage);
            padding: 48px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-radius: 12px;
        }

        .payment-amount {
            text-align: center;
            margin-bottom: 40px;
        }

        .payment-amount-label {
            font-size: 14px;
            color: var(--dusty-olive);
            letter-spacing: 1px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .payment-amount-value {
            font-size: 56px;
            font-weight: 700;
            color: var(--accent-orange);
            letter-spacing: -2px;
        }

        .payment-method-selected {
            background: var(--dusty-sage);
            color: var(--white);
            padding: 20px 28px;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 15px;
            border-radius: 8px;
        }

        .card-input-group {
            margin-bottom: 24px;
        }

        .card-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .payment-actions {
            display: flex;
            gap: 20px;
            margin-top: 40px;
        }

        .payment-actions .btn {
            flex: 1;
        }

        /* Успешная оплата */
        .success-screen {
            padding: 120px 0;
            text-align: center;
        }

        .success-icon {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: var(--dusty-sage);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            margin: 0 auto 40px;
            box-shadow: 0 15px 40px rgba(104, 126, 121, 0.3);
        }

        .success-screen h1 {
            font-size: 52px;
            margin-bottom: 20px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .success-screen p {
            font-size: 18px;
            color: var(--dusty-olive);
            margin-bottom: 56px;
            line-height: 1.8;
        }

        .success-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        /* Личный кабинет */
        .account-screen {
            padding: 60px 0 100px;
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 56px;
            padding-bottom: 28px;
            border-bottom: 2px solid var(--light-concrete);
        }

        .account-header h1 {
            font-size: 52px;
            letter-spacing: -1px;
            color: var(--black);
        }

        .account-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 60px;
        }

        .account-menu {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .account-menu-item {
            padding: 18px 24px;
            border: 2px solid var(--light-concrete);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            background: var(--white);
            font-size: 15px;
            letter-spacing: 0.3px;
            border-radius: 8px;
        }

        .account-menu-item:hover {
            background: var(--light-concrete);
            border-color: var(--dusty-sage);
            transform: translateX(4px);
        }

        .account-menu-item.active {
            background: var(--dusty-sage);
            color: var(--white);
            border-color: var(--dusty-sage);
            transform: translateX(8px);
            box-shadow: 0 6px 20px rgba(104, 126, 121, 0.3);
        }

        .account-content-section {
            display: none;
        }

        .account-content-section.active {
            display: block;
        }

        .account-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 28px;
        }

        .info-card {
            padding: 28px;
            background: var(--white);
            border: 2px solid var(--light-sage);
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
            border-radius: 8px;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-color: var(--dusty-sage);
        }

        .info-card h3 {
            font-size: 13px;
            letter-spacing: 0.5px;
            color: var(--dusty-olive);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .info-card p {
            font-size: 19px;
            font-weight: 600;
            color: var(--black);
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 28px;
        }

        .order-card {
            background: var(--white);
            border: 2px solid var(--light-sage);
            padding: 36px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            transition: all 0.3s;
            border-radius: 12px;
        }

        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
            border-color: var(--dusty-sage);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-concrete);
        }

        .order-number-display {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: 0.3px;
            color: var(--black);
        }

        .order-status {
            padding: 10px 20px;
            background: var(--dusty-sage);
            color: var(--white);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.5px;
            border-radius: 20px;
        }

        .order-status.awaiting {
            background: var(--accent-orange);
        }

        .order-status.paid {
            background: var(--dusty-sage);
        }
        
        .order-status.ready {
            background: var(--dusty-olive);
        }

        .order-status.completed {
            background: #4a7c59;
        }
        
        .order-status.new {
            background: var(--light-sage);
        }

        .order-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 28px;
            margin-bottom: 28px;
        }

        .order-detail-item h4 {
            font-size: 12px;
            letter-spacing: 0.5px;
            color: var(--dusty-olive);
            margin-bottom: 6px;
            font-weight: 700;
        }

        .order-detail-item p {
            font-size: 17px;
            font-weight: 600;
            color: var(--black);
        }

        /* Футер */
        footer {
            background: var(--dusty-sage);
            color: var(--white);
            padding: 80px 0 40px;
            margin-top: 120px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 80px;
            margin-bottom: 60px;
        }

        .footer-section h3 {
            font-size: 20px;
            margin-bottom: 28px;
            letter-spacing: 0.5px;
        }

        .footer-section p {
            font-size: 15px;
            line-height: 1.9;
            opacity: 0.9;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
            font-size: 15px;
            opacity: 0.9;
            transition: all 0.3s;
            position: relative;
            padding-left: 0;
        }

        .footer-links a:hover {
            opacity: 1;
            transform: translateX(8px);
        }

        .footer-bottom {
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            font-size: 14px;
            opacity: 0.7;
        }

        /* Утилиты */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--dusty-olive);
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 40px;
            transition: all 0.3s;
            font-size: 15px;
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--white);
            border: 1px solid var(--light-sage);
        }

        .back-link:hover {
            color: var(--accent-orange);
            transform: translateX(-4px);
            border-color: var(--accent-orange);
        }

        /* Фильтры */
        .filters-container {
            background: var(--white);
            border-radius: 16px;
            padding: 0;
            margin-bottom: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            border: 1px solid var(--light-sage);
}

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px; /* Чуть компактнее внутри */
            background: var(--white);
            border-bottom: 2px solid var(--light-concrete);
        }


        
        .filters-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dusty-olive);
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0;
        }

        .filters-title svg {
            width: 20px;
            height: 20px;
            stroke: var(--accent-orange);
        }

        .filters-reset {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid var(--light-sage);
            color: var(--dusty-sage);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            border-radius: 6px;
        }

        .filters-reset:hover {
            background: var(--accent-orange);
            color: var(--white);
            border-color: var(--accent-orange);
        }

.filters-advanced {
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* Ровно 6 колонок */
    gap: 16px; /* Отступ между ними */
    padding: 24px 32px;
    background: var(--white);
    align-items: end; /* Выравнивание по низу, чтобы было ровно */
}

/* Адаптив: на планшете в 3 колонки, на телефоне в 1 */
@media (max-width: 1200px) {
    .filters-advanced {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    .filters-advanced {
        grid-template-columns: 1fr;
    }
}

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-group label {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--dusty-sage);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group label svg {
            width: 16px;
            height: 16px;
            stroke: var(--accent-orange);
        }

        .filter-group select {
            padding: 14px 18px;
            border: 2px solid #e0e5e3;
            background: var(--white);
            font-size: 14px;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
            color: var(--dusty-olive);
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%23687e79' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 44px;
        }

        .filter-group select:hover {
            border-color: var(--dusty-sage);
            box-shadow: 0 4px 12px rgba(104, 126, 121, 0.1);
        }

        .filter-group select:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 4px rgba(211, 84, 44, 0.1);
        }

        .filter-checkbox-group {
            display: flex;
            gap: 12px;
            margin-top: 4px;
        }

        .filter-checkbox-group input[type="checkbox"] {
            display: none; /* Прячем сам чекбокс */
        }

.filter-checkbox-group label {
    flex: 1;
    display: flex;
    align-items: center;     /* Центровка по вертикали */
    justify-content: center; /* Центровка по горизонтали */
    
    /* КОПИРУЕМ РАЗМЕРЫ ИЗ СЕЛЕКТА */
    padding: 14px 10px;      /* 14px сверху/снизу как у select */
    border: 2px solid #e0e5e3;
    border-radius: 8px;
    background: var(--white);
    
    /* КОПИРУЕМ ШРИФТЫ ИЗ СЕЛЕКТА */
    font-family: 'Inter', sans-serif;
    font-size: 14px;         /* Было 11px, стало 14px как везде */
    font-weight: 500;        /* Было 700, стало 500 (тоньше) */
    color: var(--dusty-olive);
    
    /* СБРАСЫВАЕМ ЛИШНЕЕ */
    text-transform: none;    /* Убираем КАПС (В НАЛИЧИИ -> В наличии) */
    letter-spacing: 0;       /* Убираем разрядку букв */
    margin: 0;
    
    cursor: pointer;
    transition: all 0.3s;
    white-space: nowrap;     /* Текст в одну строку */
}

/* Добавляем hover эффект как у селектов */
.filter-checkbox-group label:hover {
    border-color: var(--dusty-sage);
    box-shadow: 0 4px 12px rgba(104, 126, 121, 0.1);
}

/* Стиль выбранной кнопки */
.filter-checkbox-group input[type="checkbox"]:checked + label {
    background: var(--accent-orange);
    color: var(--white);
    border-color: var(--accent-orange);
    box-shadow: 0 6px 18px rgba(211, 84, 44, 0.3);
    font-weight: 600; /* Чуть жирнее когда выбрано */
}
        .sort-section {
            padding: 24px 32px;
            background: var(--white);
            border-top: 2px solid var(--light-concrete);
        }

        .sort-section label {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--dusty-sage);
            display: block;
            margin-bottom: 16px;
        }

        .sort-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .sort-btn {
            padding: 12px 20px;
            background: var(--white);
            border: 2px solid #e0e5e3;
            color: var(--dusty-olive);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Montserrat', sans-serif;
        }
.carousel-placeholder {
    width: 100%;
    height: 220px; /* Оптимальная высота, чтобы товары внизу были видны */
    background: var(--light-concrete);
    border-radius: 12px;
    margin-bottom: 20px; /* Отступ до поиска */
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--dusty-olive);
    font-weight: 600;
    border: 1px dashed var(--light-sage);
}
        .sort-btn svg {
            width: 16px;
            height: 16px;
            stroke: currentColor;
        }

        .sort-btn:hover {
            background: var(--light-concrete);
            border-color: var(--dusty-sage);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(104, 126, 121, 0.15);
        }

        .sort-btn.active {
            background: var(--accent-orange);
            color: var(--white);
            border-color: var(--accent-orange);
            box-shadow: 0 6px 18px rgba(211, 84, 44, 0.3);
        }

        .active-filters {
            padding: 0 32px 24px 32px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            background: var(--white);
            align-items: center;
        }

        .active-filters-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--dusty-olive);
            letter-spacing: 0.3px;
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--dusty-sage);
            color: var(--white);
            border-radius: 20px;
            font-family: 'Montserrat', sans-serif;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.2px;
        }

        .filter-chip:hover {
            background: var(--deep-slate);
            transform: scale(1.05);
        }

        .filter-chip svg {
            width: 14px;
            height: 14px;
            stroke: currentColor;
        }

        /* Ценовые карточки */
        .product-pricing {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .price-per-box {
            font-size: 26px;
            font-weight: 700;
            color: var(--black);
        }

        .price-per-unit {
            font-size: 14px;
            color: var(--dusty-olive);
        }

        /* Калькулятор коробок */
        .cart-calculator {
            background: var(--light-concrete);
            padding: 28px;
            margin-top: 24px;
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
        }

        .calc-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .calc-row strong {
            font-weight: 700;
            color: var(--black);
        }

        /* Доверенные получатели */
        .trusted-recipients {
            margin-top: 28px;
            padding-top: 28px;
            border-top: 2px solid var(--light-concrete);
        }

        .recipient-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .recipient-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--white);
            border: 2px solid var(--light-sage);
            border-radius: 8px;
        }

        .recipient-item:hover {
            border-color: var(--dusty-sage);
        }

        /* Чат-бот */
        .chatbot-trigger {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 10px 30px rgba(211, 84, 44, 0.4);
            transition: all 0.3s;
            z-index: 1000;
        }

        .chatbot-trigger:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(211, 84, 44, 0.5);
        }

        .chatbot-window {
            position: fixed;
            bottom: 130px;
            right: 40px;
            width: 400px;
            height: 600px;
            background: var(--white);
            border: 2px solid var(--light-sage);
            box-shadow: 0 25px 70px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            flex-direction: column;
            border-radius: 12px;
            overflow: hidden;
        }

        .chatbot-window.active {
            display: flex;
        }

        .chatbot-header {
            background: var(--dusty-sage);
            color: var(--white);
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
        }

        .chatbot-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .chat-message {
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
        }

        .chat-message.bot {
            align-items: flex-start;
        }

        .chat-message.user {
            align-items: flex-end;
        }

        .message-bubble {
            max-width: 80%;
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
        }

        .chat-message.bot .message-bubble {
            background: var(--white);
            border: 2px solid var(--light-sage);
        }

        .chat-message.user .message-bubble {
            background: var(--dusty-sage);
            color: var(--white);
        }

        .chatbot-input-area {
            padding: 20px;
            background: var(--white);
            border-top: 2px solid var(--light-concrete);
            display: flex;
            gap: 12px;
        }

        .chatbot-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--light-sage);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            border-radius: 20px;
        }

        .chatbot-send {
            padding: 12px 24px;
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border-radius: 20px;
        }

        .chatbot-send:hover {
            background: var(--burnt-terracotta);
            transform: scale(1.05);
        }

        /* Премиальные акценты */
        .premium-badge {
            display: inline-block;
            padding: 6px 14px;
            background: #F2A497;
            color: var(--white);
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
            border-radius: 20px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1.5px;
            color: var(--dusty-olive);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--accent-orange);
            display: inline-block;
        }

        /* Медиа-запросы */
        @media (max-width: 1024px) {
            .container {
                padding: 0 32px;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .checkout-grid {
                grid-template-columns: 1fr;
            }

            .cart-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-summary {
                position: static;
                margin-top: 48px;
            }
            
            .order-summary {
                position: static;
                margin-top: 48px;
            }
            
            .account-grid {
                grid-template-columns: 1fr;
            }
            
            .account-menu-item.active {
                transform: translateX(0);
            }

            .chatbot-window {
                right: 16px;
                bottom: 110px;
            }

            .chatbot-trigger {
                right: 16px;
                bottom: 40px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
            }

            nav ul {
                display: none;
            }

            .hero h1 {
                font-size: 35px;
            }

            .hero p {
                font-size: 18px;
            }
            
            .catalog-header {
                flex-wrap: wrap;
                text-align: center;
                justify-content: center;
            }
            
            .catalog-info {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
                margin-top: 20px;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .product-detail-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .product-detail-image {
                height: 400px;
            }

            .cart-item {
                grid-template-columns: 100px 1fr auto;
                gap: 16px;
            }
            
            .cart-item-image {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }

            .cart-item-info h3 {
                font-size: 18px;
            }
            
            .cart-item-price {
                font-size: 24px;
            }

            .checkout-grid {
                gap: 32px;
            }

            .payment-methods {
                grid-template-columns: 1fr;
            }

            .payment-method {
                margin-bottom: 10px;
            }

            .success-screen h1 {
                font-size: 44px;
            }

            .success-screen p {
                font-size: 16px;
            }

            .footer-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }
        }


        .country-flag {
    width: 16px;
    height: 16px;
    border-radius: 50%; /* Делает флаг круглым */
    display: block;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2); /* Тень для объема */
    object-fit: cover;
}


/* Стили переключателя упаковок */
.unit-switch {
    display: flex;
    background: var(--light-concrete);
    padding: 4px;
    border-radius: 12px;
    gap: 4px;
    margin-bottom: 24px;
    border: 1px solid var(--light-sage);
}

.unit-btn {
    flex: 1;
    border: none;
    background: transparent;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.unit-btn:hover {
    background: rgba(255,255,255, 0.5);
}

.unit-btn.active {
    background: var(--white);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border: 1px solid #e0e5e3;
}

.unit-btn.active .unit-title {
    color: var(--accent-orange);
}

.unit-title {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    font-size: 14px;
    color: var(--dusty-olive);
    letter-spacing: 0.5px;
}

.unit-subtitle {
    font-size: 11px;
    color: var(--light-sage);
    font-weight: 500;
}

.unit-btn.active .unit-subtitle {
    color: var(--dusty-olive);
}

/* 1. Принудительно задаем одинаковую высоту для ВСЕХ элементов */
.filter-group select,
.filter-checkbox-group label {
    height: 48px !important;       /* Фиксированная высота для всех */
    max-height: 48px !important;   /* Не даем растягиваться */
    min-height: 48px !important;   /* Не даем сжиматься */
    box-sizing: border-box !important;
    
    /* Центровка текста */
    display: flex !important;
    align-items: center !important;
    
    /* Шрифт и цвет (чтобы были одинаковые) */
    font-family: 'Inter', sans-serif !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--dusty-olive) !important;
    border-radius: 8px !important;
    margin: 0 !important;
}

/* 2. Специфика для селекта (выпадающего списка) */
.filter-group select {
    /* У селекта текст центрируется иначе, поэтому паддинги */
    padding: 0 34px 0 18px !important; 
    /* Возвращаем иконку стрелки */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234E5D59' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: right 14px center !important;
    background-size: 12px !important;
    width: 100%;
}

/* 3. Специфика для кнопок (label) */
.filter-checkbox-group label {
    justify-content: center !important; /* Текст по центру */
    padding: 0 10px !important;
}

/* 4. Убираем отступ у контейнера кнопок, из-за которого они могли "прыгать" */
.filter-checkbox-group {
    margin-top: 0 !important;
    height: 48px !important; /* Высота контейнера равна высоте кнопок */
    display: flex !important;
    gap: 12px !important;
}

/* Активное состояние кнопок */
.filter-checkbox-group input[type="checkbox"]:checked + label {
    background: var(--accent-orange) !important;
    color: var(--white) !important;
    border-color: var(--accent-orange) !important;
    font-weight: 600 !important;
}
nav a.active {
    color: var(--accent-orange);
}

nav a.active::after {
    width: 100%;
}

/* Всплывающее уведомление (Toast) */
.notification-toast {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    background-color: var(--black);
    color: var(--white);
    padding: 16px 32px;
    border-radius: 50px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    z-index: 2000;
    font-family: 'Montserrat', sans-serif;
    font-weight: 600;
    font-size: 14px;
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    display: flex;
    align-items: center;
    gap: 12px;
}

.notification-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

/* Иконка предупреждения внутри тоста */
.toast-icon {
    width: 20px;
    height: 20px;
    stroke: var(--accent-orange);
}


/* --- ИСПРАВЛЕНИЕ ОТСТУПА СВЕРХУ --- */
#catalogScreen .container {
    padding-top: 20px; /* Добавили воздух между хедером и каруселью */
}

/* --- НОВАЯ ПРЕМИУМ КАРУСЕЛЬ --- */
.florex-carousel {
    position: relative;
    width: 100%;
    height: 320px; /* Было 480px -> Стало 320px. Это освободит много места */
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    margin-bottom: 24px; /* Было 40px -> Стало 24px */
    background: var(--light-concrete);
}

.carousel-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.8s ease-in-out;
    z-index: 1;
}

.carousel-slide.active {
    opacity: 1;
    z-index: 2;
}

/* Затемнение поверх фото для читаемости текста */
.carousel-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 100%);
    z-index: 2;
}

.carousel-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* Временная заглушка, если нет фото */
    background-color: var(--dusty-sage); 
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255,255,255,0.5);
    font-size: 20px;
}

.carousel-content {
    position: absolute;
    top: 50%;
    left: 60px;
    transform: translateY(-50%);
    max-width: 500px;
    z-index: 3;
    color: var(--white);
}

.carousel-tag {
    display: inline-block;
    background: var(--accent-orange);
    border-radius: 20px;
    font-weight: 700;
    letter-spacing: 1px;
    box-shadow: 0 4px 12px rgba(211, 84, 44, 0.3);
    margin-bottom: 16px; /* Уменьшили отступ */
    padding: 6px 12px;
    font-size: 11px;
}

.carousel-title {
    font-size: 36px; /* Было 48px -> Стало 36px */
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 12px; /* Чуть меньше отступ */
    letter-spacing: -1px;
}

.carousel-text {
    font-size: 15px; /* Было 18px -> Стало 15px */
    margin-bottom: 24px;
    opacity: 0.9;
    line-height: 1.5;
    max-width: 450px;
}

/* Элементы управления */
.carousel-arrows {
    position: absolute;
    bottom: 30px; /* Сделали на одной высоте с точками */
    right: 40px;
    display: flex;
    gap: 12px;
    z-index: 3;
}

/* Точки навигации - теперь по центру */

.carousel-arrow {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.3);
    color: var(--white);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
}

.carousel-arrow:hover {
    background: var(--accent-orange);
    border-color: var(--accent-orange);
    transform: scale(1.1);
}

.carousel-dots {
    position: absolute;
    bottom: 30px; /* Чуть приподняли от края */
    left: 50%; /* Центрируем по горизонтали */
    transform: translateX(-50%); /* Сдвигаем на половину своей ширины назад для точного центра */
    display: flex;
    gap: 12px;
    z-index: 3;
}


.carousel-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255,255,255,0.3);
    cursor: pointer;
    transition: all 0.3s;
}

.carousel-dot.active {
    background: var(--accent-orange);
    transform: scale(1.3);
}

/* Адаптив для карусели */
@media (max-width: 768px) {
    .florex-carousel {
        height: 400px;
        border-radius: 0; /* На мобилках на всю ширину */
        margin: 0 -32px 32px -32px; /* Компенсируем паддинг контейнера */
        width: calc(100% + 64px);
    }
    #catalogScreen .container {
        padding-top: 20px;
    }
    .carousel-content {
        left: 20px;
        right: 20px;
        text-align: center;
        transform: translateY(-45%);
    }
    .carousel-title {
        font-size: 32px;
    }
    .carousel-text {
        font-size: 16px;
    }
    .carousel-arrows {
        display: none; /* На мобилках убираем стрелки */
    }
    .carousel-dots {
        left: 50%;
        transform: translateX(-50%);
        bottom: 20px;
    }
}
    </style>
</head>
<body>

    <div id="notificationToast" class="notification-toast">
    <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <span id="toastMessage">Текст уведомления</span>
</div>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
<a href="#" class="logo" onclick="showScreen('home')" style="gap: 0; padding: 0;">
    <svg xmlns="http://www.w3.org/2000/svg"
         viewBox="320 90 160 40"
         height="40"
         style="width: auto; display: block;"
         fill="none">
        <path fill="var(--black)" d="M257.22,120.81c.06-.09.09-.21.09-.35,0-.2-.07-.35-.2-.46-.13-.11-.32-.16-.56-.16h-.76v2.04h.42v-.75h.33l.38.75h.45v-.02l-.44-.83c.12-.05.21-.13.27-.22ZM256.8,120.72c-.06.05-.14.08-.24.08h-.34v-.61h.34c.11,0,.2.03.25.08.06.06.08.13.08.23s-.03.17-.09.22ZM256.5,118.52c-1.28,0-2.32,1.04-2.32,2.32s1.04,2.32,2.32,2.32,2.32-1.04,2.32-2.32-1.04-2.32-2.32-2.32ZM256.5,122.7c-1.02,0-1.86-.83-1.86-1.86s.83-1.86,1.86-1.86,1.86.83,1.86,1.86-.83,1.86-1.86,1.86ZM185.87,101.72h-5.06c-.07,0-.12-.05-.13-.12-.53-5.08-4.56-9.05-9.63-9.52v-.05h-11.01c-.38,0-.69.31-.69.69v1.54c0,.95.77,1.72,1.72,1.72h8.98c3.29,0,6.08,2.35,6.64,5.58,0,.05-.01.09-.03.11-.01.02-.05.05-.1.05h-1.43s-.28.03-.28.03v.02c-3.81.36-7.14,2.73-8.74,6.24-.02.04-.06.06-.08.06-.02,0-.07.01-.12-.02-1.66-1.29-2.61-3.23-2.61-5.32v-4.2c0-.38-.31-.69-.69-.69h-2.58c-.38,0-.69.31-.69.69v4.2c0,4.04,2.22,7.66,5.81,9.51,0,.06,0,.12,0,.18v10.01c0,.38.31.69.69.69h10.74s.28-.03.28-.03v-.02c5.45-.51,9.68-5.14,9.68-10.65v-4.2c0-.38-.31-.69-.69-.69h-2.58c-.38,0-.69.31-.69.69v4.2c0,3.72-3.02,6.74-6.74,6.74h-6.62s0,0,0,0c-.05,0-.08-.02-.09-.04-.01-.01-.04-.04-.04-.09v-5.61h10.93c.36,0,.66-.29.68-.65l.02-6.97c0-.07.06-.13.13-.13h3.97c.95,0,1.72-.77,1.72-1.72v-1.54c0-.38-.31-.69-.69-.69ZM176.79,109.34c0,.07-.06.13-.13.13h-6.67c-.06,0-.1-.05-.11-.07-.01-.02-.03-.07,0-.12,1.17-2.22,3.45-3.61,5.95-3.62h.83c.07,0,.13.06.13.13v3.54ZM142.29,102.53v3.24c0,.21-.09.4-.24.52-.15.15-.34.21-.55.21h-10.99c.92,0,1.68.73,1.68,1.65v2.6h7.33c.52,0,.79.27.79.79v3.21c0,.24-.06.43-.21.55-.15.15-.34.21-.58.21h-9.01c.89,0,1.68.73,1.68,1.62v5.13c0,.21-.06.4-.21.55-.12.15-.31.21-.55.21h-4.06c-.46,0-.76-.31-.76-.76v-17.86c0-.7.34-1.44.82-1.92.24-.21.52-.4.86-.55.34-.12.64-.18.98-.18h12.24c.4,0,.79.4.79.79ZM161.03,118.44c.15.15.21.34.21.58v3.24c0,.24-.06.43-.21.55-.15.15-.37.21-.58.21h-14.14c-.37,0-.76-.4-.76-.76v-17.89c0-1.4,1.25-2.63,2.66-2.63h2.38c.21,0,.4.06.52.21.15.15.21.34.21.55v14.81c0,.15.09.37.24.58.15.24.4.37.7.37h8.18c.21,0,.43.06.58.18ZM204.52,115.14c-.06-.09-.09-.18-.06-.34,0-.15.09-.27.24-.37,2.14-1.22,3.27-3.21,3.27-5.68,0-5.04-3.85-6.96-8.55-6.96h-6.47c-1.5,0-2.66,1.13-2.66,2.63v17.89c0,.37.43.73.76.73h4.18c.21,0,.4-.06.55-.21.15-.12.21-.31.21-.52v-5.04c0-.37-.15-.73-.43-1.1-.31-.34-.7-.52-1.22-.52h4c.37,0,.64.15.82.49l3.11,6.11c.24.52.64.79,1.22.79h4.31c.15,0,.31-.06.46-.18.12-.12.18-.27.18-.43,0-.09-.03-.21-.09-.34l-3.85-6.96ZM199.39,111.17h-2.66c-.27,0-.49-.09-.64-.27-.18-.18-.27-.4-.27-.64v-2.47c0-.92-.79-1.62-1.68-1.62h5.25c.79,0,1.44.21,1.95.64.49.46.73,1.1.73,1.92,0,1.65-1.1,2.44-2.69,2.44ZM227.67,119.29v2.99c0,.24-.06.43-.21.55-.15.15-.37.21-.58.21h-14.6c-.37,0-.76-.4-.76-.76v-17.86c0-1.5,1.16-2.66,2.66-2.66h12.46c.49,0,.79.31.79.79v3.02c0,.21-.06.4-.21.52-.15.15-.34.21-.58.21h-11.27c.92,0,1.68.73,1.68,1.65v1.28c0,.52.4.95.92.95h6.66c.49,0,.79.31.79.79v2.75c0,.46-.34.79-.79.79h-9.25c.86,0,1.68.7,1.68,1.59v1.44c0,.52.4.95.92.95h8.92c.52,0,.79.27.79.79ZM249.78,122.1c.06.12.09.24.09.37,0,.15-.06.31-.18.46-.15.12-.31.18-.46.18h-4.79c-.43,0-.79-.21-1.07-.61l-3.73-5.4c-.12-.03-.18-.06-.24-.06l-3.73,5.47c-.27.4-.64.61-1.07.61h-4.64c-.15,0-.31-.06-.46-.18-.12-.15-.18-.31-.18-.46s.03-.24.09-.34l6.53-9.77c.06-.06.06-.12.03-.21l-6.05-9.31c-.06-.12-.09-.24-.09-.37,0-.34.31-.64.64-.64h4.64c.46,0,.82.21,1.1.67l3.27,5.01c.03.09.09.12.18.12l3.54-5.13c.27-.46.61-.67,1.07-.67h4.43c.15,0,.31.06.46.18.12.15.18.31.18.46,0,.12-.03.24-.09.37l-6.08,9.25c-.06.06-.06.12,0,.21l6.6,9.8ZZM473.55,120.81c.06-.09.09-.21.09-.35,0-.2-.07-.35-.2-.46-.13-.11-.32-.16-.56-.16h-.76v2.04h.42v-.75h.33l.38.75h.45v-.02l-.44-.83c.12-.05.21-.13.27-.22ZM473.13,120.72c-.06.05-.14.08-.24.08h-.34v-.61h.34c.11,0,.2.03.25.08.06.06.08.13.08.23s-.03.17-.09.22ZM472.83,118.52c-1.28,0-2.32,1.04-2.32,2.32s1.04,2.32,2.32,2.32,2.32-1.04,2.32-2.32-1.04-2.32-2.32-2.32ZM472.83,122.7c-1.02,0-1.86-.83-1.86-1.86s.83-1.86,1.86-1.86,1.86.83,1.86,1.86-.83,1.86-1.86,1.86ZM402.2,101.72h-5.06c-.07,0-.12-.05-.13-.12-.53-5.08-4.56-9.05-9.63-9.52v-.05h-11.01c-.38,0-.69.31-.69.69v1.54c0,.95.77,1.72,1.72,1.72h8.98c3.29,0,6.08,2.35,6.64,5.58,0,.05-.01.09-.03.11-.01.02-.05.05-.1.05h-1.43s-.28.03-.28.03v.02c-3.81.36-7.14,2.73-8.74,6.24-.02.04-.06.06-.08.06-.02,0-.07.01-.12-.02-1.66-1.29-2.61-3.23-2.61-5.32v-4.2c0-.38-.31-.69-.69-.69h-2.58c-.38,0-.69.31-.69.69v4.2c0,4.04,2.22,7.66,5.81,9.51,0,.06,0,.12,0,.18v10.01c0,.38.31.69.69.69h10.74s.28-.03.28-.03v-.02c5.45-.51,9.68-5.14,9.68-10.65v-4.2c0-.38-.31-.69-.69-.69h-2.58c-.38,0-.69.31-.69.69v4.2c0,3.72-3.02,6.74-6.74,6.74h-6.62s0,0,0,0c-.05,0-.08-.02-.09-.04-.01-.01-.04-.04-.04-.09v-5.61h10.93c.36,0,.66-.29.68-.65l.02-6.97c0-.07.06-.13.13-.13h3.97c.95,0,1.72-.77,1.72-1.72v-1.54c0-.38-.31-.69-.69-.69ZM393.12,109.34c0,.07-.06.13-.13.13h-6.67c-.06,0-.1-.05-.11-.07-.01-.02-.03-.07,0-.12,1.17-2.22,3.45-3.61,5.95-3.62h.83c.07,0,.13.06.13.13v3.54ZM358.62,102.53v3.24c0,.21-.09.4-.24.52-.15.15-.34.21-.55.21h-10.99c.92,0,1.68.73,1.68,1.65v2.6h7.33c.52,0,.79.27.79.79v3.21c0,.24-.06.43-.21.55-.15.15-.34.21-.58.21h-9.01c.89,0,1.68.73,1.68,1.62v5.13c0,.21-.06.4-.21.55-.12.15-.31.21-.55.21h-4.06c-.46,0-.76-.31-.76-.76v-17.86c0-.7.34-1.44.82-1.92.24-.21.52-.4.86-.55.34-.12.64-.18.98-.18h12.24c.4,0,.79.4,.79.79ZM377.36,118.44c.15.15.21.34.21.58v3.24c0,.24-.06.43-.21.55-.15.15-.37.21-.58.21h-14.14c-.37,0-.76-.4-.76-.76v-17.89c0-1.4,1.25-2.63,2.66-2.63h2.38c.21,0,.4.06.52.21.15.15.21.34.21.55v14.81c0,.15.09.37.24.58.15.24.4.37.7.37h8.18c.21,0,.43.06.58.18ZM420.86,115.14c-.06-.09-.09-.18-.06-.34,0-.15.09-.27.24-.37,2.14-1.22,3.27-3.21,3.27-5.68,0-5.04-3.85-6.96-8.55-6.96h-6.47c-1.5,0-2.66,1.13-2.66,2.63v17.89c0,.37.43.73.76.73h4.18c.21,0,.4-.06.55-.21.15-.12.21-.31.21-.52v-5.04c0-.37-.15-.73-.43-1.1-.31-.34-.7-.52-1.22-.52h4c.37,0,.64.15.82.49l3.11,6.11c.24.52.64.79,1.22.79h4.31c.15,0,.31-.06.46-.18.12-.12.18-.27.18-.43,0-.09-.03-.21-.09-.34l-3.85-6.96ZM415.73,111.17h-2.66c-.27,0-.49-.09-.64-.27-.18-.18-.27-.4-.27-.64v-2.47c0-.92-.79-1.62-1.68-1.62h5.25c.79,0,1.44.21,1.95.64.49.46.73,1.1.73,1.92,0,1.65-1.1,2.44-2.69,2.44ZM444,119.29v2.99c0,.24-.06.43-.21.55-.15.15-.37.21-.58.21h-14.6c-.37,0-.76-.4-.76-.76v-17.86c0-1.5,1.16-2.66,2.66-2.66h12.46c.49,0,.79.31.79.79v3.02c0,.21-.06.4-.21.52-.15.15-.34.21-.58.21h-11.27c.92,0,1.68.73,1.68,1.65v1.28c0,.52.4.95.92.95h6.66c.49,0,.79.31.79.79v2.75c0,.46-.34.79-.79.79h-9.25c.86,0,1.68.7,1.68,1.59v1.44c0,.52.4.95.92.95h8.92c.52,0,.79.27.79.79ZM466.11,122.1c.06.12.09.24.09.37,0,.15-.06.31-.18.46-.15.12-.31.18-.46.18h-4.79c-.43,0-.79-.21-1.07-.61l-3.73-5.4c-.12-.03-.18-.06-.24-.06l-3.73,5.47c-.27.4-.64.61-1.07.61h-4.64c-.15,0-.31-.06-.46-.18-.12-.15-.18-.31-.18-.46s.03-.24.09-.34l6.53-9.77c.06-.06.06-.12.03-.21l-6.05-9.31c-.06-.12-.09-.24-.09-.37,0-.34.31-.64.64-.64h4.64c.46,0,.82.21,1.1.67l3.27,5.01c.03.09.09.12.18.12l3.54-5.13c.27-.46.61-.67,1.07-.67h4.43c.15,0,.31.06.46.18.12.15.18.31.18.46,0,.12-.03.24-.09.37l-6.08,9.25c-.06.06-.06.12,0,.21l6.6,9.8Z"/>
    </svg>
</a>
                <nav>
                    <ul>
                        <li><a href="#" onclick="showScreen('catalog')">Каталог</a></li>
                        <li><a href="#">О компании</a></li>
                        <li><a href="#">Контакты</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <div class="lang-switcher">
                        <a href="#" class="lang-btn active">РУС</a>
                        <a href="#" class="lang-btn">КАЗ</a>
                    </div>
                    <div class="cart-icon" onclick="tryOpenCart()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                                <line x1="3" y1="6" x2="21" y2="6"/>
                                <path d="M16 10a4 4 0 0 1-8 0"/>
                            </svg>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                    <div class="user-icon hidden-for-guest" onclick="showScreen('account')">ГА</div>
                    <div class="guest-login" onclick="showScreen('home')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Вход
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Экраны остаются без изменений -->
    <!-- Home Screen -->
    <div id="homeScreen" class="screen active">
        <div class="auth-screen">
            <div class="auth-container">
                <div class="auth-logo">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="228.000000pt" height="206.000000pt" viewBox="0 0 228.000000 206.000000" preserveAspectRatio="xMidYMid meet">

                <g transform="translate(0.000000,206.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                <path d="M957 1944 c-168 -37 -310 -111 -429 -223 -126 -118 -198 -232 -254 -401 -26 -79 -28 -97 -28 -250 -1 -189 14 -261 85 -405 217 -443 764 -629 1204 -408 95 48 148 86 224 157 252 240 341 617 225 950 -51 147 -160 300 -285 399 -80 64 -241 147 -334 172 -87 24 -321 29 -408 9z m224 -415 c96 -45 176 -145 194 -242 l7 -37 94 0 94 0 0 -60 0 -59 -92 -3 -93 -3 -5 -120 -5 -120 -177 -3 -178 -2 0 -85 0 -85 128 0 c144 0 188 13 236 71 41 48 48 73 55 184 l6 100 54 3 c37 2 57 -1 62 -10 23 -35 1 -225 -32 -290 -32 -62 -96 -125 -158 -155 -56 -28 -57 -28 -266 -28 l-210 0 -3 166 -2 167 -53 40 c-37 27 -64 59 -87 103 -35 63 -35 65 -35 189 l0 125 55 0 55 0 7 -103 c7 -105 29 -174 65 -204 14 -11 19 -9 37 17 72 102 175 165 272 165 45 0 46 1 39 28 -13 53 -54 103 -108 128 -49 22 -63 24 -221 24 -196 0 -206 4 -206 75 0 23 3 45 8 49 4 4 97 6 207 4 192 -3 202 -4 256 -29z"/>
                <path d="M1185 1121 c-56 -14 -115 -54 -136 -93 -9 -17 -2 -18 96 -18 l105 0 0 60 c0 65 -1 66 -65 51z"/>
                </g>
                </svg>
                    <h1>Регистрация</h1>
                    <p>Заполните данные для входа в систему</p>
                </div>
                <form onsubmit="startRegistration(event)">
                    <div class="form-group">
                        <label>Название компании</label>
                        <input type="text" id="companyName" placeholder="ТОО «Bloom Atelier Almaty»" required>
                    </div>
                    <div class="form-group">
                        <label>БИН/ИИН</label>
                        <input type="text" id="binIin" placeholder="123456789012" maxlength="12" required>
                    </div>
                    <div class="form-group">
                        <label>Мобильный телефон</label>
                        <input type="tel" id="phoneNumber" placeholder="+7 (___) ___-__-__" required>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">Согласен с условиями <a href="#" target="_blank">Публичной оферты</a></label>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 16px;">Подтвердить через SMS</button>
                </form>
            </div>
        </div>
    </div>

    <!-- SMS Screen -->
    <div id="smsScreen" class="screen">
        <div class="auth-screen">
            <div class="auth-container">
                <div class="sms-verification">
                    <h2>Введите код подтверждения</h2>
                    <p>Код отправлен на номер <strong id="displayPhone">+7 (700) 123-45-67</strong></p>
                    <form onsubmit="verifySMS(event)">
                        <div class="sms-code-inputs">
                            <input type="text" class="sms-code-input" maxlength="1" id="code1" required>
                            <input type="text" class="sms-code-input" maxlength="1" id="code2" required>
                            <input type="text" class="sms-code-input" maxlength="1" id="code3" required>
                            <input type="text" class="sms-code-input" maxlength="1" id="code4" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Войти в систему</button>
                        <div class="resend-code">
                            Не пришел код? <a onclick="resendCode()">Отправить повторно</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Catalog Screen -->
    <div id="catalogScreen" class="screen">
<div class="container">
    
<div class="florex-carousel">
    <div class="carousel-slide active">
        <img src="1.png" alt="Свежие поставки" class="carousel-image" onerror="this.style.display='none'">
        <div class="carousel-overlay"></div>
        <div class="carousel-content">
            <span class="carousel-tag">Новое поступление</span>
            <h2 class="carousel-title">Свежие розы<br>из Эквадора</h2>
            <p class="carousel-text">Премиальные сорта с крупным бутоном уже доступны к заказу. Успейте забронировать лучшие позиции.</p>
            <button class="btn btn-primary" onclick="scrollToFilters()">Смотреть каталог</button>
        </div>
    </div>
    
    <div class="carousel-slide">
        <img src="2.png" alt="Спецпредложение" class="carousel-image" onerror="this.style.display='none'">
        <div class="carousel-overlay"></div>
        <div class="carousel-content">
            <span class="carousel-tag" style="background: var(--dusty-sage);">Акция недели</span>
            <h2 class="carousel-title">Скидка 15%<br>на тюльпаны</h2>
            <p class="carousel-text">Готовьтесь к сезону заранее. Специальные условия при заказе от 10 коробок.</p>
            <button class="btn btn-primary" onclick="scrollToFilters()">Выбрать тюльпаны</button>
        </div>
    </div>

    <div class="carousel-slide">
        <img src="3.png" alt="О компании" class="carousel-image" onerror="this.style.display='none'">
        <div class="carousel-overlay"></div>
        <div class="carousel-content">
            <span class="carousel-tag">Florex Premium</span>
            <h2 class="carousel-title">Ваш надежный<br>оптовый партнер</h2>
            <p class="carousel-text">Прямые поставки с лучших плантаций мира. Гарантия свежести и качества.</p>
            <button class="btn btn-primary" onclick="showScreen('about')">О компании</button>
        </div>
    </div>

    <div class="carousel-arrows">
        <button class="carousel-arrow" onclick="prevSlide()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <button class="carousel-arrow" onclick="nextSlide()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
    </div>

    <div class="carousel-dots">
        <div class="carousel-dot active" onclick="goToSlide(0)"></div>
        <div class="carousel-dot" onclick="goToSlide(1)"></div>
        <div class="carousel-dot" onclick="goToSlide(2)"></div>
    </div>
</div>
<div class="catalog-header">
    <div class="search-wrapper">
        <svg class="search-icon-inside" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input type="text" class="search-input" placeholder="Поиск по названию, сорту или цвету..." oninput="console.log(this.value)">
    </div>
    
    <div class="location-selector">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="stroke: var(--accent-orange);">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
        </svg>
        <span id="selectedCity" style="font-weight: 600;">Алматы</span>
    </div>
</div>
    
            <div class="filters-container">
<div class="filters-header">
    <h2 class="filters-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
        </svg>
        Фильтры
    </h2>

    <div class="sort-buttons">
        <button class="sort-btn active" onclick="setSorting('popular', this)" data-sort-key="popular">Популярные</button>
        <button class="sort-btn" onclick="setSorting('price-asc', this)" data-sort-key="price-asc">Цена ↑</button>
        <button class="sort-btn" onclick="setSorting('price-desc', this)" data-sort-key="price-desc">Цена ↓</button>
        <button class="sort-btn" onclick="setSorting('name', this)" data-sort-key="name">А-Я</button>
</div>
    <button class="filters-reset" onclick="resetFilters()">Сбросить все</button>
</div>

<div class="filters-advanced">
    <div class="filter-group">
        <label>Вид цветка</label>
        <select id="filterType" onchange="applyFilters()">
            <option value="">Все виды</option>
            <option value="roses">Розы</option>
            <option value="tulips">Тюльпаны</option>
            <option value="chrysanthemums">Хризантемы</option>
            <option value="eustoma">Эустома</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Страна</label>
        <select id="filterCountry" onchange="applyFilters()">
            <option value="">Все страны</option>
            <option value="Нидерланды">Нидерланды</option>
            <option value="Эквадор">Эквадор</option>
            <option value="Кения">Кения</option>
            <option value="Колумбия">Колумбия</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Наличие</label>
        <div class="filter-checkbox-group">
            <input type="checkbox" id="checkStock" onchange="applyFilters()">
            <label for="checkStock">В наличии</label>
            
            <input type="checkbox" id="checkPreorder" onchange="applyFilters()">
            <label for="checkPreorder">В пути</label>
        </div>
    </div>

    <div class="filter-group">
        <label>Цвет</label>
        <select id="filterColor" onchange="applyFilters()">
            <option value="">Все цвета</option>
            <option value="Красный">Красный</option>
            <option value="Белый">Белый</option>
            <option value="Розовый">Розовый</option>
            <option value="Персиковый">Персиковый</option>
            <option value="Зеленый">Зеленый</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Рост</label>
        <select id="filterHeight" onchange="applyFilters()">
            <option value="">Любой</option>
            <option value="38">38 см</option>
            <option value="55">55 см</option>
            <option value="60">60 см</option>
            <option value="70">70 см</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Свежесть</label>
        <select id="filterDays" onchange="applyFilters()">
            <option value="">Любой срок</option>
            <option value="1">1 день</option>
            <option value="3">до 3 дней</option>
            <option value="5">до 5 дней</option>
        </select>
    </div>
</div>




            </div>

            <div class="products-grid" id="productsGrid">
                <!-- Products will be generated by JS -->
            </div>
        </div>
    </div>

    <!-- Product Detail Screen -->
    <div id="productScreen" class="screen">
        <div class="container">
            <a href="#" class="back-link" onclick="showScreen('catalog')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Назад к каталогу
            </a>
            <div class="product-detail">
                <div class="product-detail-grid">
                    <div class="product-detail-image">
                        <!-- Здесь будет фото товара - замените на ваше изображение -->
                        <img src="product-detail-image.jpg" alt="Роза Red Naomi" id="productDetailPhoto">
                    </div>
                    <div class="product-detail-info">
                        <h1 id="productDetailName">Роза Red Naomi</h1>
                        <p class="product-article" id="productDetailArticle">Артикул: RN50-2024-NL</p>
                        
                        <!-- Терракотовая плашка с количеством -->
                        <div class="detail-quantity-badge" id="productDetailQuantity">50 шт</div>
                        
                        <div class="product-detail-specs">
                            <div class="spec-item">
                                <span class="spec-label">Цвет</span>
                                <span class="spec-value" id="productDetailColor">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                    </svg>
                                    Красный
                                </span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-label">Рост</span>
                                <span class="spec-value" id="productDetailHeight">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="2" x2="12" y2="22"/>
                                        <polyline points="5 9 12 2 19 9"/>
                                    </svg>
                                    60 см
                                </span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-label">Вес</span>
                                <span class="spec-value" id="productDetailWeight">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18M3 6v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6M3 6l3-3m15 3l-3-3M12 10v4"/>
                                    </svg>
                                    34 гр
                                </span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-label">Страна</span>
                                <span class="spec-value" id="productDetailCountry">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                    </svg>
                                    Нидерланды
                                </span>
                            </div>
                        </div>
                        
                        <!-- Логотип Florex -->
<div class="unit-selector-container">
    <span class="spec-label" style="margin-bottom: 12px; display: block;">Единица измерения:</span>
    <div class="unit-switch">
        <button class="unit-btn active" id="btnUnitBox" onclick="setUnit('box')">
            <div class="unit-title">Коробка</div>
            <div class="unit-subtitle" id="boxContentInfo">50 стеблей</div>
        </button>
        <button class="unit-btn" id="btnUnitPack" onclick="setUnit('pack')">
            <div class="unit-title">Упаковка</div>
            <div class="unit-subtitle" id="packContentInfo">10 стеблей</div>
        </button>
    </div>
</div>

<div class="quantity-selector">
    <span class="quantity-label" id="quantityLabel">Количество коробок:</span>
    <div class="quantity-controls">
        <button class="quantity-btn" onclick="changeQuantity(-1)">−</button>
        <input type="number" class="quantity-input" id="productQuantity" value="0" min="0" readonly>
        <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
    </div>
</div>

<div class="product-pricing" style="margin: 32px 0;">
    <div class="price-per-box" style="font-size: 40px;" id="productDetailPriceBox">0 ₸</div>
    <div class="price-per-unit" style="font-size: 16px; margin-top: 8px;" id="productDetailPriceStem"></div>
</div>
                        <div class="product-actions">
                            <button class="btn btn-primary" style="flex: 2;" onclick="addToCartFromDetail()">Добавить в корзину</button>
                            <button class="btn btn-outline" onclick="showScreen('catalog')">Продолжить покупки</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Screen -->
    <div id="cartScreen" class="screen">
        <div class="container">
            <a href="#" class="back-link" onclick="showScreen('catalog')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Продолжить покупки
            </a>
            <div class="cart-screen">
                <h1>Корзина (Заказ № 123456789)</h1>
                <div class="cart-grid">
                    <div class="cart-items" id="cartItems">
                        <!-- Cart items will be generated by JS -->
                    </div>
                    <div class="cart-summary">
                        <h2>Итого</h2>
                        
                        <!-- Добавлен калькулятор коробок -->
<div class="cart-calculator">
    <div class="section-title">Расчет</div>
    
    <div class="calc-row" style="align-items: flex-start;">
        <div style="display: flex; flex-direction: column;">
            <span>Всего упаковок:</span>
            <span id="totalPackagesPrice" style="font-size: 13px; color: var(--accent-orange); font-weight: 600; margin-top: 4px;">0 ₸</span>
        </div>
        <strong id="totalPackages" style="font-size: 20px;">0</strong>
    </div>

    <div class="calc-row" style="align-items: flex-start;">
        <div style="display: flex; flex-direction: column;">
            <span>Всего коробок:</span>
            <span id="totalBoxesPrice" style="font-size: 13px; color: var(--accent-orange); font-weight: 600; margin-top: 4px;">0 ₸</span>
        </div>
        <strong id="totalBoxes" style="font-size: 20px;">0</strong>
    </div>

    <div class="calc-row" style="margin-top: 12px; padding-top: 12px; border-top: 1px dashed rgba(0,0,0,0.1);">
        <span style="color: var(--dusty-olive);">Всего стеблей:</span>
        <strong id="totalStems">0</strong>
    </div>
</div>

                        <div class="summary-row">
                            <span>Товары (<span id="summaryItemCount">0</span>)</span>
                            <span id="summarySubtotal">0 ₸</span>
                        </div>
                        <div class="summary-row">
                            <span>Скидка</span>
                            <span id="summaryDiscount">0 ₸</span>
                        </div>
                        <div class="summary-row">
                            <span>Общая стоимость</span>
                            <span id="summaryTotal">0 ₸</span>
                        </div>
                        <div class="promo-code">
                            <input type="text" class="promo-input" id="promoInput" placeholder="Промокод">
                            <button class="promo-btn" onclick="applyPromo()">OK</button>
                        </div>
                        <button class="btn checkout-btn" onclick="showScreen('checkout')">Оформить заказ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Screen -->
    <div id="checkoutScreen" class="screen">
        <div class="container">
            <a href="#" class="back-link" onclick="showScreen('cart')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"/>
                    <polyline points="12 19 5 12 12 5"/>
                </svg>
                Вернуться в корзину
            </a>
            <div class="checkout-screen">
                <h2>Оформление заказа (Заказ № 123456789) </h2>
                
                <!-- Таймлайн заказа -->
                <div class="order-timeline">
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Корзина</div>
                        <div class="timeline-date">Сегодня</div>
                    </div>
                    <div class="timeline-step active">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Оформление</div>
                        <div class="timeline-date">Сейчас</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Оплата</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Подтверждение</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Завершен</div>
                        <div class="timeline-date"></div>
                    </div>
                </div>
                
                <div class="checkout-grid">
                    <div>
                        <div class="checkout-section">
                            <h2><span class="step-number">1</span> Способ получения</h2>
                            <div class="delivery-options">
                                <div class="delivery-option selected" onclick="selectDelivery(this)">
                                    <div class="radio"></div>
                                    <div class="delivery-info">
                                        <h3>Самовывоз</h3>
                                        <p>Алматы, Проспект Суюнбая, 37 • Пн–Пт: 08:00–19:00</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="checkout-section">
                            <h2><span class="step-number">2</span> Способ оплаты</h2>
                            <div class="payment-methods">
                                <div class="payment-method selected" onclick="selectPayment(this, 'card')">
                                    <div class="payment-icon">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                            <line x1="1" y1="10" x2="23" y2="10"/>
                                        </svg>
                                    </div>
                                    <h3>Картой</h3>
                                </div>
                                <div class="payment-method" onclick="selectPayment(this, 'kaspi')">
                                    <div class="payment-icon">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M8 12h8"/>
                                            <path d="M12 8v8"/>
                                        </svg>
                                    </div>
                                    <h3>Kaspi Pay</h3>
                                </div>
                                <div class="payment-method" onclick="selectPayment(this, 'balance')">
                                    <div class="payment-icon">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                    <h3>Баланс</h3>
                                </div>
                                <!-- Добавлен новый способ оплаты - выставить счет -->
                                <div class="payment-method" onclick="selectPayment(this, 'invoice')">
                                    <div class="payment-icon">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <polyline points="14 2 14 8 20 8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                            <polyline points="10 9 9 9 8 9"/>
                                        </svg>
                                    </div>
                                    <h3>Выставить счет</h3>
                                    <p style="font-size: 11px; color: var(--dusty-olive); margin-top: 8px;">Для юр. лиц</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="order-summary">
                        <h2>Ваш заказ</h2>
                        <div class="order-items" id="checkoutItems">
                            <!-- Will be filled by JS -->
                        </div>
                        <div class="summary-row">
                            <span>Товары</span>
                            <span id="checkoutSubtotal">0 ₸</span>
                        </div>
                        <div class="summary-row">
                            <span>Доставка</span>
                            <span id="checkoutDelivery">0 ₸</span>
                        </div>
                        <div class="summary-row">
                            <span>Общая стоимость</span>
                            <span id="checkoutTotal">0 ₸</span>
                        </div>
                        <button class="place-order-btn" onclick="proceedToPayment()">Перейти к оплате</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Screen -->
    <div id="paymentScreen" class="screen">
        <div class="container">
            <div class="payment-screen">
                <div class="payment-container">
                    <h1>Оплата заказа</h1>
                    <p class="order-number">Заказ № <span id="paymentOrderNumber">123456789</span></p>
                    
                    <!-- Таймлайн заказа -->
                    <div class="order-timeline">
                        <div class="timeline-step completed">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label">Корзина</div>
                            <div class="timeline-date">Сегодня</div>
                        </div>
                        <div class="timeline-step completed">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label">Оформление</div>
                            <div class="timeline-date">Сегодня</div>
                        </div>
                        <div class="timeline-step active">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label">Оплата</div>
                            <div class="timeline-date">Сейчас</div>
                        </div>
                        <div class="timeline-step">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label">Подтверждение</div>
                            <div class="timeline-date"></div>
                        </div>
                        <div class="timeline-step">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label">Завершен</div>
                            <div class="timeline-date"></div>
                        </div>
                    </div>
                    
                    <div class="payment-card">
                        <div class="payment-amount">
                            <div class="payment-amount-label">К оплате</div>
                            <div class="payment-amount-value" id="paymentAmount">128 000 ₸</div>
                        </div>
                        <div class="payment-method-selected" id="selectedPaymentMethod">Оплата банковской картой</div>
                        <div id="cardPaymentForm">
                            <div class="card-input-group">
                                <label>Номер карты</label>
                                <input type="text" placeholder="0000 0000 0000 0000" maxlength="19">
                            </div>
                            <div class="card-row">
                                <div class="card-input-group">
                                    <label>Срок действия</label>
                                    <input type="text" placeholder="ММ/ГГ" maxlength="5">
                                </div>
                                <div class="card-input-group">
                                    <label>CVV</label>
                                    <input type="text" placeholder="000" maxlength="3">
                                </div>
                            </div>
                        </div>
                        <div class="payment-actions">
                            <button class="btn btn-secondary" onclick="showScreen('checkout')">Назад</button>
                            <button class="btn btn-primary" onclick="completePayment()">Оплатить</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Screen -->
    <div id="successScreen" class="screen">
        <div class="container">
            <div class="success-screen">
                <div class="success-icon">✓</div>
                <h1>Платеж принят!</h1>
                <p>Ваш заказ № <strong id="successOrderNumber">123456789</strong> успешно оформлен<br>Мы отправили подтверждение на вашу почту</p>
                <div class="success-actions">
                    <button class="btn btn-primary" onclick="showScreen('account')">Перейти в личный кабинет</button>
                    <button class="btn btn-outline" onclick="showScreen('catalog')">Продолжить покупки</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Screen -->
    <div id="accountScreen" class="screen">
        <div class="container">
            <div class="account-screen">
                <div class="account-header">
                    <h1>Личный кабинет</h1>
                    <button class="btn btn-secondary">Выход</button>
                </div>
                <div class="account-grid">
                    <div class="account-menu">
                        <div class="account-menu-item active" onclick="showAccountSection('profile')">Личные данные</div>
                        <div class="account-menu-item" onclick="showAccountSection('orders')">Мои заказы</div>
                        <div class="account-menu-item" onclick="showAccountSection('balance')">Мой баланс</div>
                        <div class="account-menu-item" onclick="showAccountSection('recipients')">Доверенные лица</div>
                    </div>
                    <div>
                        <!-- Profile Section -->
                        <div class="account-content-section active" id="profileSection">
                            <h2 style="font-size: 36px; margin-bottom: 40px;">Личные данные</h2>
                            <div class="section-title">Реквизиты компании</div>
                            <div class="account-info-grid">
                                <div class="info-card">
                                    <h3>Название компании</h3>
                                    <p>Bloom Atelier Almaty</p>
                                </div>
                                <div class="info-card">
                                    <h3>БИН/ИИН</h3>
                                    <p>123456789012</p>
                                </div>
                                <div class="info-card">
                                    <h3>Расчетный счет (IBAN)</h3>
                                    <p>KZ55 1234 5678 9000 0000</p>
                                </div>
                                <div class="info-card">
                                    <h3>БИК</h3>
                                    <p>KZKOKZKX</p>
                                </div>
                                <div class="info-card">
                                    <h3>Контактное лицо</h3>
                                    <p>Гульжан Абдуллаева</p>
                                </div>
                                <div class="info-card">
                                    <h3>Телефон</h3>
                                    <p>+7 (700) 123-45-67</p>
                                </div>
                                <div class="info-card">
                                    <h3>Email</h3>
                                    <p>info@bloomatelier.kz</p>
                                </div>
                                <div class="info-card">
                                    <h3>Адрес</h3>
                                    <p>Алматы, ул. Кабанбай батыра, 10</p>
                                </div>
                            </div>
                            
                            <!-- Добавлена секция с личной скидкой -->
                            <div class="section-title" style="margin-top: 48px;">Бонусы и скидки</div>
                            <div class="info-card" style="padding: 32px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <h3 style="font-size: 16px; margin-bottom: 8px;">Ваша личная скидка</h3>
                                        <p style="font-size: 13px; color: var(--dusty-olive); margin-top: 5px;">* Личная скидка распространяется только на определенные позиции в каталоге.</p>
                                        <p style="font-size: 32px; font-weight: 700; color: var(--accent-orange);">15%</p>
                                    </div>
                                    <div class="premium-badge">VIP Клиент</div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" style="margin-top: 40px;">Редактировать данные</button>
                        </div>

                        <!-- Улучшенный раздел заказов со статусами -->
                        <div class="account-content-section" id="ordersSection">
                            <h2 style="font-size: 36px; margin-bottom: 40px;">Мои заказы</h2>
                            <div class="orders-list">
                                <div class="order-card">
                                    <div class="order-header">
                                        <span class="order-number-display">Заказ № 123456789</span>
                                        <span class="order-status awaiting">Ожидает оплаты</span>
                                    </div>
                                    <div class="order-details">
                                        <div class="order-detail-item">
                                            <h4>Дата заказа</h4>
                                            <p>16 ноября 2025</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Оригинальная цена</h4>
                                            <p style="text-decoration: line-through; color: var(--dusty-olive);">280 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Итоговая цена</h4>
                                            <p style="color: var(--accent-orange); font-weight: 700;">256 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Всего коробок</h4>
                                            <p>6 коробок (300 шт)</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Получение</h4>
                                            <p>Самовывоз • 18 ноября</p>
                                        </div>
                                    </div>
                <div class="order-timeline">                           
                    <div class="timeline-step active">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Ожидает оплаты</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Оплачен</div>
                        <div class="timeline-date">Сейчас</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">В пути</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Готов к выдаче</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Выдан</div>
                        <div class="timeline-date"></div>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary" style="margin-top: 16px;">Оплатить заказ</button>

                                </div>
                                
                                <div class="order-card">
                                    <div class="order-header">
                                        <span class="order-number-display">Заказ № 123456788</span>
                                        <span class="order-status paid">Оплачен</span>
                                    </div>
                                    <div class="order-details">
                                        <div class="order-detail-item">
                                            <h4>Дата заказа</h4>
                                            <p>15 ноября 2025</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Оригинальная цена</h4>
                                            <p style="text-decoration: line-through; color: var(--dusty-olive);">400 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Итоговая цена</h4>
                                            <p>384 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Всего коробок</h4>
                                            <p>8 коробок (400 шт)</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Получение</h4>
                                            <p>Доставка • 17 ноября</p>
                                        </div>
                                    </div>


                                                    <div class="order-timeline">                           
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Ожидает оплаты</div>
                    </div>
                    <div class="timeline-step active">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Оплачен</div>
                        <div class="timeline-date">Сейчас</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">В пути</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Готов к выдаче</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Выдан</div>
                        <div class="timeline-date"></div>
                                        </div>
                                    </div>
                                    <button class="btn btn-outline" style="margin-top: 16px;">Посмотреть детали</button>

                                </div>
                                
                                <div class="order-card">
                                    <div class="order-header">
                                        <span class="order-number-display">Заказ № 123456787</span>
                                        <span class="order-status completed">Выдан</span>
                                    </div>
                                    <div class="order-details">
                                        <div class="order-detail-item">
                                            <h4>Дата заказа</h4>
                                            <p>10 ноября 2025</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Оригинальная цена</h4>
                                            <p style="text-decoration: line-through; color: var(--dusty-olive);">512 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Итоговая цена</h4>
                                            <p>492 000 ₸</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Всего коробок</h4>
                                            <p>10 коробок (500 шт)</p>
                                        </div>
                                        <div class="order-detail-item">
                                            <h4>Получение</h4>
                                            <p>Самовывоз • 12 ноября</p>
                                        </div>
                                    </div>

                                                                                        <div class="order-timeline">                           
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Ожидает оплаты</div>
                    </div>
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Оплачен</div>
                        <div class="timeline-date">Сейчас</div>
                    </div>
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">В пути</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Готов к выдаче</div>
                        <div class="timeline-date"></div>
                    </div>
                    <div class="timeline-step active">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Выдан</div>
                        <div class="timeline-date"></div>
                                        </div>
                                    </div>
                                    <button class="btn btn-outline" style="margin-top: 16px;">Повторить заказ</button>

                                </div>
                            </div>
                        </div>

                        <!-- Balance Section -->
                        <div class="account-content-section" id="balanceSection">
                            <h2 style="font-size: 36px; margin-bottom: 40px;">Мой баланс</h2>
                            <div class="info-card" style="padding: 60px; text-align: center; background: linear-gradient(135deg, var(--light-concrete) 0%, var(--white) 100%);">
                                <h3 style="font-size: 18px; margin-bottom: 20px; letter-spacing: 1px;">Текущий баланс</h3>
                                <p style="font-size: 64px; font-weight: 700; color: var(--accent-orange); letter-spacing: -2px;">2 000 000 ₸</p>
                                <p style="margin-top: 16px; color: var(--dusty-olive);">Средства доступны для оплаты заказов</p>
                            </div>
                            <div style="display: flex; gap: 20px; margin-top: 40px;">
                                <button class="btn btn-primary" style="flex: 1;">Пополнить баланс</button>
                                <button class="btn btn-secondary" style="flex: 1;">История операций</button>
                            </div>
                        </div>

                        <!-- Новая секция доверенных получателей -->
                        <div class="account-content-section" id="recipientsSection">
                            <h2 style="font-size: 36px; margin-bottom: 40px;">Доверенные получатели</h2>
                            <p style="color: var(--dusty-olive); margin-bottom: 32px;">Добавьте контакты сотрудников или курьеров, которым разрешаете получать заказы от вашего имени</p>
                            
                            <div class="recipient-list">
                                <div class="recipient-item">
                                    <div>
                                        <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Айгерим Нурланова</h4>
                                        <p style="font-size: 14px; color: var(--dusty-olive);">+7 (701) 234-56-78 • Курьер</p>
                                    </div>
                                    <button class="btn btn-outline" style="padding: 8px 16px; font-size: 13px;">Удалить</button>
                                </div>
                                
                                <div class="recipient-item">
                                    <div>
                                        <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Марат Жумабеков</h4>
                                        <p style="font-size: 14px; color: var(--dusty-olive);">+7 (702) 345-67-89 • Флорист</p>
                                    </div>
                                    <button class="btn btn-outline" style="padding: 8px 16px; font-size: 13px;">Удалить</button>
                                </div>
                                Корзина 
                                <div class="recipient-item">
                                    <div>
                                        <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Дина Касымова</h4>
                                        <p style="font-size: 14px; color: var(--dusty-olive);">+7 (705) 456-78-90 • Администратор</p>
                                    </div>
                                    <button class="btn btn-outline" style="padding: 8px 16px; font-size: 13px;">Удалить</button>
                                </div>

                                                                <div class="recipient-item">
                                    <div>
                                        <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Азамат Есимханулы</h4>
                                        <p style="font-size: 14px; color: var(--dusty-olive);">+7 (705) 456-78-90 • Яндекс Курьер</p>
                                        <a href="">Ссылка на Курьера</a>
                                    </div>
                                    <button class="btn btn-outline" style="padding: 8px 16px; font-size: 13px;">Удалить</button>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" style="margin-top: 32px;">+ Добавить получателя</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>О компании Florex</h3>
                    <p>Международный оптовый поставщик свежих цветов от ведущих мировых производителей. Профессиональное качество и надёжность для вашего бизнеса.</p>
                </div>
                <div class="footer-section">
                    <h3>Каталог</h3>
                    <div class="footer-links">
                        <a href="#">Розы</a>
                        <a href="#">Тюльпаны</a>
                        <a href="#">Хризантемы</a>
                        <a href="#">Эустома</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Компания</h3>
                    <div class="footer-links">
                        <a href="#">О нас</a>
                        <a href="#">Контакты</a>
                        <a href="#">Доставка</a>
                        <a href="#">Публичная оферта</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <div class="footer-links">
                        <a href="tel:+77008004000">+7 700 800-40-00</a>
                        <a href="mailto:info@florex.kz">info@florex.kz</a>
                        <a href="#">Алматы, Проспект Суюнбая, 37</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                © 2025 Florex. Все права защищены.
            </div>
        </div>
    </footer>

    <!-- Чат-бот -->
    <button class="chatbot-trigger" onclick="toggleChatbot()">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
    </button>

    <div class="chatbot-window" id="chatbotWindow">
        <div class="chatbot-header">
            <h3>Консультант Florex</h3>
            <button class="chatbot-close" onclick="toggleChatbot()">×</button>
        </div>
        <div class="chatbot-messages" id="chatMessages">
            <div class="chat-message bot">
                <div class="message-bubble">
                    Здравствуйте! Я виртуальный консультант Florex. Чем могу помочь?
                </div>
            </div>
        </div>
        <div class="chatbot-input-area">
            <input type="text" class="chatbot-input" id="chatInput" placeholder="Напишите ваш вопрос..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="chatbot-send" onclick="sendMessage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"/>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        let isLoggedIn = false; // По умолчанию пользователь НЕ авторизован


        function tryOpenCart() {
    if (isLoggedIn) {
        showScreen('cart');
    } else {
        showNotification('Пожалуйста, войдите в систему для доступа к корзине');
        showScreen('home'); // Перекидываем на экран входа
        // Плавный скролл к форме входа, если нужно
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}


// 2. Красивое уведомление
function showNotification(message) {
    const toast = document.getElementById('notificationToast');
    const msg = document.getElementById('toastMessage');
    
    msg.textContent = message;
    toast.classList.add('show');
    
    // Скрываем через 3 секунды
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}
        // Sample Products Data with more details
        const products = [
            { 
                id: 1, 
                name: 'Роза Red Naomi', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Красный', 
                height: '60', 
                weight: '34',
                country: 'Нидерланды', 
                box: '50', 
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 128000, // Цена за КОРОБКУ
                pricePerStem: 2560, 
                category: 'roses', 
                status: 'stock', 
                daysInStock: 3 
            },
            { 
                id: 2, 
                name: 'Тюльпан Double Painted Bubble', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Персиковый', 
                height: '38', 
                weight: '28',
                country: 'Нидерланды', 
                box: '50', 
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 85000, // Цена за КОРОБКУ
                pricePerStem: 1700, 
                category: 'tulips', 
                status: 'stock', 
                daysInStock: 1 
            },
            { 
                id: 3, 
                name: 'Роза Avalanche+', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Белый', 
                height: '70', 
                weight: '38',
                country: 'Эквадор', 
                box: '50',
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 145000, // Цена за КОРОБКУ 
                pricePerStem: 2900, 
                category: 'roses', 
                status: 'preorder', 
                daysInStock: 0 
            },
            { 
                id: 4, 
                name: 'Эустома Green Poetry', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Зеленый', 
                height: '55', 
                weight: '25',
                country: 'Колумбия', 
                box: '40', 
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 92000, // Цена за КОРОБКУ
                pricePerStem: 2300, 
                category: 'eustoma', 
                status: 'stock', 
                daysInStock: 2 
            },
            { 
                id: 5, 
                name: 'Роза Pink Floyd', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Розовый', 
                height: '60', 
                weight: '32',
                country: 'Кения', 
                box: '50', 
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 118000, // Цена за КОРОБКУ
                pricePerStem: 2360, 
                category: 'roses', 
                status: 'stock', 
                daysInStock: 4 
            },
            { 
                id: 6, 
                name: 'Хризантема Baltica', 
                photo: 'image copy 2.png', // Замените на ваше фото
                color: 'Белый', 
                height: '70', 
                weight: '45',
                country: 'Нидерланды', 
                box: '60', 
                bunchesInBox: 5, // НОВОЕ: Упаковок в коробке (например 5 пачек по 10 роз)
        stemsPerBunch: 10, // НОВОЕ: Стеблей в одной упаковке
        price: 78000, // Цена за КОРОБКУ
                pricePerStem: 1300, 
                category: 'chrysanthemums', 
                status: 'stock', 
                daysInStock: 5 
            },
        ];

        let cart = [];

        
        let currentProduct = null;
        let discount = 0; // Initialize discount to 0

        let selectionState = {
    box: 0,
    pack: 0
};
let selectedUnit = 'box'; // 'box' или 'pack'

// 1. Функция переключения
function setUnit(unit) {
    selectedUnit = unit;
    
    // 1. Визуально переключаем кнопки
    document.querySelectorAll('.unit-btn').forEach(b => b.classList.remove('active'));
    if(unit === 'box') document.getElementById('btnUnitBox').classList.add('active');
    else document.getElementById('btnUnitPack').classList.add('active');

    // 2. Меняем заголовок "Количество ..."
    const label = document.getElementById('quantityLabel');
    label.textContent = unit === 'box' ? 'Количество коробок:' : 'Количество упаковок:';

    // 3. ВАЖНО: Подставляем в инпут то число, которое мы запомнили для этого типа
    document.getElementById('productQuantity').value = selectionState[unit];

    // 4. Обновляем цены
    updatePriceDisplay();
}
function toggleFilters() {
    const filtersBlock = document.getElementById('filtersBlock');
    filtersBlock.classList.toggle('open');
}
// 2. Функция обновления отображения цены
function updatePriceDisplay() {
    if (!currentProduct) return;
    const priceBox = document.getElementById('productDetailPriceBox');
    const priceStem = document.getElementById('productDetailPriceStem');
    const quantityBadge = document.querySelector('.detail-quantity-badge');

    if (selectedUnit === 'box') {
        priceBox.textContent = `${currentProduct.price.toLocaleString('ru-RU')} ₸`;
        priceStem.textContent = `${currentProduct.pricePerStem.toLocaleString('ru-RU')} ₸ / Стебель`;
        quantityBadge.textContent = `В наличии`; 
    } else {
        const packPrice = currentProduct.price / currentProduct.bunchesInBox;
        priceBox.textContent = `${packPrice.toLocaleString('ru-RU')} ₸`;
        priceStem.textContent = `за 1 упаковку (${currentProduct.stemsPerBunch} шт)`;
        quantityBadge.textContent = `В наличии`;
    }
}
        // Screen Navigation
function showScreen(screenName) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(screenName + 'Screen').classList.add('active');
    
    // Подсветка активного пункта навигации
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    if (screenName === 'catalog') {
        const catalogLink = document.querySelector('nav a[onclick="showScreen(\'catalog\')"]');
        if (catalogLink) catalogLink.classList.add('active');
    }
    
    if (screenName === 'catalog') {
        renderProducts();
    } else if (screenName === 'cart') {
        renderCart();
    } else if (screenName === 'checkout') {
        renderCheckout();
    }
    
    window.scrollTo(0, 0);
}

            function showUserIcon() {
                const userIcon = document.querySelector('.user-icon');
                const guestLogin = document.querySelector('.guest-login');
                if (userIcon && guestLogin) {
                    // Удаляем класс, который скрывает элемент
                    userIcon.classList.remove('hidden-for-guest');
                    guestLogin.style.display = 'none';
                    console.log('Иконка пользователя теперь видна!');
                }
            }
        function startRegistration(e) {
            e.preventDefault();
            const phone = document.getElementById('phoneNumber').value;
            document.getElementById('displayPhone').textContent = phone;
            showScreen('sms');
            
            // Auto-focus first input
            setTimeout(() => {
                document.getElementById('code1').focus();
            }, 100);
        }

function verifySMS(e) {
    e.preventDefault();
    
    // Логика проверки кода (тут у вас заглушка, оставляем как есть)
    
    // УСПЕШНЫЙ ВХОД
    isLoggedIn = true; // <--- ВАЖНО: Ставим флаг, что вошли
    
    showScreen('catalog');
    showUserIcon();
    showNotification('Вы успешно вошли в систему!'); // Приветствие
}

        function resendCode() {
            alert('Код отправлен повторно!');
        }

        function applyFilters() {
            renderProducts();
            updateActiveFilters(); // Also update active filters display
        }

// Функция для получения SVG флага по названию страны
function getCountryFlag(countryName) {
    const className = "country-flag";
    
    // Нидерланды
    if (countryName === 'Нидерланды') {
        return `<svg class="${className}" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg"><rect width="900" height="600" fill="#21468b"/><rect width="900" height="400" fill="#fff"/><rect width="900" height="200" fill="#ae1c28"/></svg>`;
    }
    // Эквадор
    else if (countryName === 'Эквадор') {
        return `<svg class="${className}" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg"><rect width="900" height="600" fill="#ce1126"/><rect width="900" height="450" fill="#00338d"/><rect width="900" height="300" fill="#fcd116"/></svg>`;
    }
    // Кения
    else if (countryName === 'Кения') {
        return `<svg class="${className}" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg"><rect width="900" height="600" fill="#000"/><rect y="150" width="900" height="300" fill="#fff"/><rect y="170" width="900" height="260" fill="#bb0000"/><rect y="400" width="900" height="200" fill="#006600"/></svg>`;
    }
    // Колумбия
    else if (countryName === 'Колумбия') {
        return `<svg class="${className}" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg"><rect width="900" height="600" fill="#ce1126"/><rect width="900" height="450" fill="#003893"/><rect width="900" height="300" fill="#fcd116"/></svg>`;
    }
    // Стандартная иконка глобуса (если страна неизвестна)
    else {
        return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>`;
    }
}


        function renderProducts(filter = 'all') {
            const grid = document.getElementById('productsGrid');
            let filtered = [...products]; // Create a copy to avoid modifying original array
            
            // Apply filters
            const filterType = document.getElementById('filterType')?.value;
            const filterCountry = document.getElementById('filterCountry')?.value;
            const filterColor = document.getElementById('filterColor')?.value;
            const filterHeight = document.getElementById('filterHeight')?.value;
            const filterDays = document.getElementById('filterDays')?.value;
            const sortSelect = document.querySelector('.sort-btn.active')?.getAttribute('data-sort-key') || 'popular'; // Get sort key from active button
            // Новая логика для чекбоксов
            const stockChecked = document.getElementById('checkStock').checked;
            const preorderChecked = document.getElementById('checkPreorder').checked;

            // Если выбран только один, фильтруем по нему
            if (stockChecked && !preorderChecked) {
                filtered = filtered.filter(p => p.status === 'stock');
            } else if (!stockChecked && preorderChecked) {
                filtered = filtered.filter(p => p.status === 'preorder');
            }
            // Если выбраны оба или не выбран ни один - показываем все (фильтр не применяем)
            if (filterType) filtered = filtered.filter(p => p.category === filterType);
            if (filterCountry) filtered = filtered.filter(p => p.country === filterCountry);
            if (filterColor) filtered = filtered.filter(p => p.color === filterColor);
            if (filterHeight) filtered = filtered.filter(p => p.height === filterHeight);
            if (filterDays) filtered = filtered.filter(p => p.daysInStock <= parseInt(filterDays));
            
            // Apply sorting
            if (sortSelect === 'price-asc') {
                filtered.sort((a, b) => a.price - b.price);
            } else if (sortSelect === 'price-desc') {
                filtered.sort((a, b) => b.price - a.price);
            } else if (sortSelect === 'name') {
                filtered.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortSelect === 'stock') {
                filtered.sort((a, b) => {
                    if (a.status === 'stock' && b.status !== 'stock') return -1;
                    if (a.status !== 'stock' && b.status === 'stock') return 1;
                    return b.daysInStock - a.daysInStock;
                });
            } else if (sortSelect === 'popular') {
                // Default sort or sort by a 'popularity' field if available
                filtered.sort((a, b) => a.id - b.id); // Simple sort by ID as placeholder
            }
            
            grid.innerHTML = filtered.map(product => {
                // Вычисляем цену за упаковку
                const packPrice = product.price / product.bunchesInBox;
                
                return `
                <div class="product-card" onclick="showProduct(${product.id})">
                    <div class="product-image">
                        <!-- Замените src на путь к вашему изображению -->
                        <img src="${product.photo}" alt="${product.name}" onerror="this.src='placeholder-image.jpg'">
                        <div class="product-status ${product.status === 'stock' ? 'in-stock' : 'pre-order'}">
                            ${product.status === 'stock' ? `В наличии ${product.daysInStock}д` : 'В пути'}
                        </div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        
                        <!-- Терракотовая плашка с количеством -->
                        
                        <div class="product-specs">
                            <div class="spec-item">
                                <span class="spec-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="2" x2="12" y2="22"/>
                                        <polyline points="5 9 12 2 19 9"/>
                                    </svg>
                                </span>
                                <span>${product.height} см</span>
                            </div>
                            <div class="spec-item">
                                <span class="spec-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18M3 6v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6M3 6l3-3m15 3l-3-3M12 10v4"/>
                                    </svg>
                                </span>
                                <span>${product.weight} гр</span>
                            </div>
                        <div class="spec-item">
                            <span class="spec-icon">
                                ${getCountryFlag(product.country)}
                            </span>
                            <span>${product.country}</span>
                        </div>
                        </div>
                        
                        <!-- Логотип Florex -->
                        
                        <div class="product-price">
                            <div class="price-box">
                                <div class="price-per-box">${product.price.toLocaleString('ru-RU')} ₸</div>
                                <div class="price-unit">Коробка (${product.box} шт)</div>
                            </div>
                            <div class="price-pack">
                                <div class="price-per-box">${packPrice.toLocaleString('ru-RU')} ₸</div>
                                <div class="price-unit">Упаковка (${product.stemsPerBunch} шт)</div>
                            </div>
                            <button class="add-to-cart-btn" onclick="event.stopPropagation(); quickAddToCart(${product.id})">В корзину</button>
                        </div>
                    </div>
                </div>
            `}).join('');
        }

        function setSorting(sort, btn) {
            document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            applyFilters(); // Re-apply filters to sort
        }

        function resetFilters() {
            document.getElementById('filterType').value = '';
            document.getElementById('filterCountry').value = '';
            document.getElementById('filterColor').value = '';
            document.getElementById('checkStock').checked = false;
            document.getElementById('checkPreorder').checked = false;
            document.getElementById('filterHeight').value = '';
            document.getElementById('filterDays').value = '';
            document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
            document.querySelector('.sort-btn[data-sort-key="popular"]').classList.add('active'); // Set default active sort button
            applyFilters();
        }

        function updateActiveFilters() {
            const activeFiltersDiv = document.getElementById('activeFilters');
            const filters = [];
            
            const filterType = document.getElementById('filterType')?.value;
            const filterCountry = document.getElementById('filterCountry')?.value;
            const filterAvailability = document.getElementById('filterAvailability')?.value;
            const filterColor = document.getElementById('filterColor')?.value;
            const filterHeight = document.getElementById('filterHeight')?.value;
            const filterDays = document.getElementById('filterDays')?.value;
            
            if (filterType) {
                const text = document.getElementById('filterType').selectedOptions[0].text;
                filters.push({ key: 'filterType', label: text });
            }
            if (filterCountry) {
                const text = document.getElementById('filterCountry').selectedOptions[0].text;
                filters.push({ key: 'filterCountry', label: text });
            }
            const stockChecked = document.getElementById('checkStock').checked;
            const preorderChecked = document.getElementById('checkPreorder').checked;

            if (stockChecked && !preorderChecked) {
                filters.push({ key: 'checkStock', label: 'В наличии' });
            } else if (!stockChecked && preorderChecked) {
                filters.push({ key: 'checkPreorder', label: 'В пути' });
            }
            if (filterColor) {
                filters.push({ key: 'filterColor', label: filterColor });
            }
            if (filterHeight) {
                filters.push({ key: 'filterHeight', label: `${filterHeight} см` });
            }
            if (filterDays) {
                const text = document.getElementById('filterDays').selectedOptions[0].text;
                filters.push({ key: 'filterDays', label: text });
            }
            
            if (filters.length > 0) {
                activeFiltersDiv.innerHTML = `
                    <span class="active-filters-label">Активные фильтры:</span>
                    ${filters.map(f => `
                        <span class="filter-chip">
                            ${f.label}
                            <svg onclick="removeFilter('${f.key}')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </span>
                    `).join('')}
                `;
            } else {
                activeFiltersDiv.innerHTML = '';
            }
        }

function removeFilter(key) {
            const el = document.getElementById(key);
            if (el) {
                if (el.type === 'checkbox') {
                    el.checked = false; // Снимаем галочку
                } else if (el.tagName === 'SELECT') {
                    el.value = ''; // Сбрасываем селект
                }
            }
            applyFilters();
        }

        // Show Product Detail
// Обновленная функция открытия товара
function showProduct(id) {
    currentProduct = products.find(p => p.id === id);
    
    // Сбрасываем выбор в 0 при открытии нового товара
    selectionState = { box: 0, pack: 0 };
    selectedUnit = 'box';

    // Заполнение картинок и текстов (стандартное)
    document.getElementById('productDetailPhoto').src = currentProduct.photo;
    document.getElementById('productDetailName').textContent = currentProduct.name;
    document.getElementById('productDetailArticle').textContent = `Артикул: ${currentProduct.id}RN`;
    
    // Спецификации (Оставляем как было)
    document.getElementById('productDetailColor').innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg> ${currentProduct.color}`;
    document.getElementById('productDetailHeight').innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="2" x2="12" y2="22"/><polyline points="5 9 12 2 19 9"/></svg> ${currentProduct.height} см`;
    document.getElementById('productDetailWeight').innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M3 6v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6M3 6l3-3m15 3l-3-3M12 10v4"/></svg> ${currentProduct.weight} гр`;
    document.getElementById('productDetailCountry').innerHTML = `${getCountryFlag(currentProduct.country)} ${currentProduct.country}`;

    // Настройка вложений (если нет в базе)
    if (!currentProduct.bunchesInBox) currentProduct.bunchesInBox = 5; 
    if (!currentProduct.stemsPerBunch) currentProduct.stemsPerBunch = 10;

    // Тексты в табах
    document.getElementById('boxContentInfo').textContent = `${currentProduct.box} стеблей`;
    document.getElementById('packContentInfo').textContent = `${currentProduct.stemsPerBunch} стеблей`;

    // Обновляем UI (активируем коробку)
    setUnit('box'); 
    
    showScreen('product');
}

// Функция изменения количества (+/-) для конкретного типа
function changeDetailQuantity(type, delta) {
    const inputId = type === 'box' ? 'qtyBox' : 'qtyPack';
    const input = document.getElementById(inputId);
    let newValue = parseInt(input.value) + delta;
    
    if (newValue < 0) newValue = 0; // Не даем уйти в минус
    input.value = newValue;
    
    updateDetailTotal();
}

// Функция подсчета общей суммы в реальном времени
function updateDetailTotal() {
    if (!currentProduct) return;
    
    const qtyBox = parseInt(document.getElementById('qtyBox').value) || 0;
    const qtyPack = parseInt(document.getElementById('qtyPack').value) || 0;
    
    const boxPrice = currentProduct.price;
    const packPrice = currentProduct.price / currentProduct.bunchesInBox;
    
    const total = (qtyBox * boxPrice) + (qtyPack * packPrice);
    
    document.getElementById('detailTotalSum').textContent = `${total.toLocaleString('ru-RU')} ₸`;
}

        // Quantity Controls
        function changeQuantity(delta) {
            // Меняем значение в памяти для ТЕКУЩЕЙ вкладки
            let newValue = selectionState[selectedUnit] + delta;
            
            if (newValue < 0) newValue = 0; // Не даем уйти ниже 0
            
            selectionState[selectedUnit] = newValue; // Сохраняем
            
            // Обновляем инпут на экране
            document.getElementById('productQuantity').value = newValue;
        }

        // Add to Cart
function quickAddToCart(id) {
    const product = products.find(p => p.id === id);
    
    // Ищем товар в корзине
    const existingIndex = cart.findIndex(item => item.id === product.id);
    
    if (existingIndex !== -1) {
        // Если товар уже есть, добавляем коробку
        cart[existingIndex].boxQuantity += 1;
    } else {
        // Если нет, создаем новый элемент
        cart.push({ 
            ...product, 
            boxQuantity: 1,
            packQuantity: 0
        });
    }
    
    updateCartCount();
    renderCart();
    showNotification('Товар добавлен в корзину');
}

// Функция добавления в корзину (обрабатывает и коробки, и упаковки)
function addToCartFromDetail() {
    if (!isLoggedIn) {
        showNotification('Сначала авторизуйтесь для заказа');
        showScreen('home');
        return;
    }

    const qtyBox = selectionState.box;
    const qtyPack = selectionState.pack;

    if (qtyBox === 0 && qtyPack === 0) {
        showNotification('Выберите количество (Коробки или Упаковки)');
        return;
    }

    // Ищем товар в корзине
    const existingIndex = cart.findIndex(item => item.id === currentProduct.id);

    if (existingIndex !== -1) {
        // Если товар уже есть, обновляем количества
        cart[existingIndex].boxQuantity += qtyBox;
        cart[existingIndex].packQuantity += qtyPack;
    } else {
        // Если нет, добавляем новый элемент
        cart.push({ 
            ...currentProduct,
            boxQuantity: qtyBox,
            packQuantity: qtyPack
        });
    }

    // Сбрасываем выбор после добавления
    selectionState = { box: 0, pack: 0 };
    document.getElementById('productQuantity').value = 0;

    updateCartCount();
    showNotification('Товары добавлены в корзину');
    showScreen('cart');
}

        function addToCart(product, quantity, unit) {
            const existingIndex = cart.findIndex(item => 
                item.id === product.id && item.isPack === (unit === 'pack')
            );
            
            if (existingIndex !== -1) {
                cart[existingIndex].quantity += quantity;
            } else {
                cart.push({ 
                    ...product, 
                    quantity,
                    unit: unit,
                    isPack: unit === 'pack'
                });
            }
            updateCartCount();
            renderCart(); // Re-render cart to reflect changes
        }

function updateCartCount() {
    const count = cart.reduce((sum, item) => sum + item.boxQuantity + item.packQuantity, 0);
    document.getElementById('cartCount').textContent = count;
    console.log('Cart count updated:', count); // Для отладки
}

        // Render Cart
function renderCart() {
    const cartItems = document.getElementById('cartItems');
    
    if (cart.length === 0) {
        cartItems.innerHTML = '<div style="text-align: center; padding: 80px 0; color: var(--dusty-olive)"><h2 style="font-size: 32px; margin-bottom: 16px;">Корзина пуста</h2><p style="margin: 20px 0; font-size: 16px;">Добавьте товары из каталога</p><button class="btn btn-primary" onclick="showScreen(\'catalog\')">Перейти в каталог</button></div>';
        
        document.getElementById('summaryItemCount').textContent = '0';
        document.getElementById('summarySubtotal').textContent = '0 ₸';
        document.getElementById('summaryDiscount').textContent = '0 ₸';
        document.getElementById('summaryTotal').textContent = '0 ₸';
        
        if (document.getElementById('totalPackages')) {
            document.getElementById('totalPackages').textContent = '0';
            document.getElementById('totalBoxes').textContent = '0';
            document.getElementById('totalStems').textContent = '0';
        }
        return;
    }
    
    cartItems.innerHTML = cart.map((item, index) => {
        const boxTotal = item.boxQuantity * item.price;
        const packPrice = item.price / item.bunchesInBox;
        const packTotal = item.packQuantity * packPrice;
        const itemTotal = boxTotal + packTotal;

        return `
        <div class="cart-item">
            <div class="cart-item-image">
                <img src="${item.photo}" alt="${item.name}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='placeholder-image.jpg'">
            </div>
            <div class="cart-item-info">
                <h3>${item.name}</h3>
                
                <div class="cart-item-meta">
                    <span>${item.color} • ${item.height} см</span>
                </div>

                <!-- Блок для коробок -->
                ${item.boxQuantity > 0 ? `
                <div style="margin-top: 8px; padding: 10px; border-radius: 8px; border: 2px solid #f0f0f0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 16px;">
                        <!-- Левая часть: название + счётчик -->
                        <div style="display: grid; grid-template-columns: auto max-content; align-items: center; column-gap: 16px; min-width: 260px;">
                            <div>
                                <strong>Коробка</strong>
                                <div style="font-size: 14px; color: var(--dusty-olive); white-space: nowrap;">
                                    ${item.box} стеблей
                                </div>
                            </div>
                            <div class="cart-item-quantity">
                                <div class="quantity-controls" style="transform: scale(0.85); transform-origin: left center;">
                                    <button class="quantity-btn" onclick="updateCartBoxQuantity(${index}, -1)">−</button>
                                    <input type="number" class="quantity-input" value="${item.boxQuantity}" readonly>
                                    <button class="quantity-btn" onclick="updateCartBoxQuantity(${index}, 1)">+</button>
                                </div>
                            </div>
                        </div>
                        <!-- Правая часть: цены -->
                        <div style="text-align: right;">
                            <div style="font-size: 14px; color: var(--dusty-olive);">Цена за коробку: ${item.price.toLocaleString('ru-RU')} ₸</div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--accent-orange);">${boxTotal.toLocaleString('ru-RU')} ₸</div>
                        </div>
                    </div>
                </div>
                ` : ''}

                <!-- Блок для упаковок -->
                ${item.packQuantity > 0 ? `
                <div style="margin-top: 8px; padding: 10px; border-radius: 8px; border: 1px solid #f0f0f0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 16px;">
                        <!-- Левая часть: название + счётчик -->
                        <div style="display: grid; grid-template-columns: auto max-content; align-items: center; column-gap: 16px; min-width: 260px;">
                            <div>
                                <strong>Упаковка</strong>
                                <div style="font-size: 14px; color: var(--dusty-olive); white-space: nowrap;">
                                    ${item.stemsPerBunch} стеблей
                                </div>
                            </div>
                            <div class="cart-item-quantity">
                                <div class="quantity-controls" style="transform: scale(0.85); transform-origin: left center;">
                                    <button class="quantity-btn" onclick="updateCartPackQuantity(${index}, -1)">−</button>
                                    <input type="number" class="quantity-input" value="${item.packQuantity}" readonly>
                                    <button class="quantity-btn" onclick="updateCartPackQuantity(${index}, 1)">+</button>
                                </div>
                            </div>
                        </div>
                        <!-- Правая часть: цены -->
                        <div style="text-align: right;">
                            <div style="font-size: 14px; color: var(--dusty-olive);">Цена за упаковку: ${packPrice.toLocaleString('ru-RU')} ₸</div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--accent-orange);">${packTotal.toLocaleString('ru-RU')} ₸</div>
                        </div>
                    </div>
                </div>
                ` : ''}

            </div>
            
            <div class="cart-item-actions">
                <div style="text-align: right;">
                    <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--dusty-olive); margin-bottom: 4px;">Общая сумма</div>
                    <div class="cart-item-price">${itemTotal.toLocaleString('ru-RU')} ₸</div>
                </div>
                <button class="remove-btn" onclick="removeFromCart(${index})">Удалить</button>
            </div>
        </div>
        `;
    }).join('');
    
    updateCartSummary();
}


function updateCartBoxQuantity(index, delta) {
    cart[index].boxQuantity += delta;
    if (cart[index].boxQuantity < 0) {
        cart[index].boxQuantity = 0;
    }
    // Если оба количества стали 0, удаляем товар из корзины
    if (cart[index].boxQuantity === 0 && cart[index].packQuantity === 0) {
        cart.splice(index, 1);
    }
    updateCartCount();
    renderCart();
}

function updateCartPackQuantity(index, delta) {
    cart[index].packQuantity += delta;
    if (cart[index].packQuantity < 0) {
        cart[index].packQuantity = 0;
    }
    if (cart[index].boxQuantity === 0 && cart[index].packQuantity === 0) {
        cart.splice(index, 1);
    }
    updateCartCount();
    renderCart();
}

function updateCartPackQuantity(index, delta) {
    cart[index].packQuantity += delta;
    if (cart[index].packQuantity < 0) {
        cart[index].packQuantity = 0;
    }
    if (cart[index].boxQuantity === 0 && cart[index].packQuantity === 0) {
        cart.splice(index, 1);
    }
    updateCartCount();
    renderCart();
}
        function updateCartQuantity(index, delta) {
            cart[index].quantity += delta;
            if (cart[index].quantity < 1) {
                cart.splice(index, 1);
            }
            updateCartCount();
            renderCart();
        }

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartCount();
    renderCart();
}

function updateCartSummary() {
    let totalPackages = 0;
    let totalPackagesCost = 0;
    let totalBoxes = 0;
    let totalBoxesCost = 0;
    let totalStems = 0;
    let subtotal = 0;
    let itemCount = 0;

    cart.forEach(item => {
        totalBoxes += item.boxQuantity;
        totalBoxesCost += item.boxQuantity * item.price;
        totalPackages += item.packQuantity;
        totalPackagesCost += item.packQuantity * (item.price / item.bunchesInBox);
        totalStems += item.boxQuantity * item.box + item.packQuantity * item.stemsPerBunch;
        subtotal += item.boxQuantity * item.price + item.packQuantity * (item.price / item.bunchesInBox);
        itemCount += item.boxQuantity + item.packQuantity;
    });

    // Обновляем основные цифры корзины
    document.getElementById('summaryItemCount').textContent = itemCount;
    document.getElementById('summarySubtotal').textContent = subtotal.toLocaleString('ru-RU') + ' ₸';
    document.getElementById('summaryDiscount').textContent = discount.toLocaleString('ru-RU') + ' ₸';
    document.getElementById('summaryTotal').textContent = (subtotal - discount).toLocaleString('ru-RU') + ' ₸';
    
    // Обновляем блок "Расчет"
    if (document.getElementById('totalPackages')) {
        document.getElementById('totalPackages').textContent = totalPackages;
        document.getElementById('totalPackagesPrice').textContent = totalPackages > 0 
            ? `${totalPackagesCost.toLocaleString('ru-RU')} ₸` 
            : '0 ₸';

        document.getElementById('totalBoxes').textContent = totalBoxes;
        document.getElementById('totalBoxesPrice').textContent = totalBoxes > 0 
            ? `${totalBoxesCost.toLocaleString('ru-RU')} ₸` 
            : '0 ₸';

        document.getElementById('totalStems').textContent = totalStems;
    }
}

        function applyPromo() {
            const promoInput = document.getElementById('promoInput');
            const promoCode = promoInput.value.trim().toUpperCase();
            
            if (promoCode === 'FLOREX15') {
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                discount = Math.floor(subtotal * 0.15);
                alert('Промокод применен! Скидка 15%');
                updateCartSummary();
            } else if (promoCode) {
                alert('Неверный промокод');
                discount = 0; // Reset discount if invalid code
                updateCartSummary();
            }
        }

        // Render Checkout
function renderCheckout() {
    const checkoutItems = document.getElementById('checkoutItems');
    checkoutItems.innerHTML = cart.map(item => {
        const boxTotal = item.boxQuantity * item.price;
        const packTotal = item.packQuantity * (item.price / item.bunchesInBox);
        const itemTotal = boxTotal + packTotal;

        return `
            <div class="order-item">
                <div class="order-item-image">
                    <img src="${item.photo}" alt="${item.name}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='placeholder-image.jpg'">
                </div>
                <div class="order-item-info">
                    <h4>${item.name}</h4>
                    ${item.boxQuantity > 0 ? `<p>Коробки: ${item.boxQuantity} × ${item.price.toLocaleString('ru-RU')} ₸</p>` : ''}
                    ${item.packQuantity > 0 ? `<p>Упаковки: ${item.packQuantity} × ${(item.price / item.bunchesInBox).toLocaleString('ru-RU')} ₸</p>` : ''}
                </div>
                <div class="order-item-price">${itemTotal.toLocaleString('ru-RU')} ₸</div>
            </div>
        `;
    }).join('');
            
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('checkoutSubtotal').textContent = subtotal.toLocaleString('ru-RU') + ' ₸';
            document.getElementById('checkoutDelivery').textContent = '0 ₸'; // Default, will be updated
            document.getElementById('checkoutTotal').textContent = subtotal.toLocaleString('ru-RU') + ' ₸'; // Default, will be updated
        }

        // Delivery Selection
        function selectDelivery(element) {
            document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            
            const deliveryCost = element.querySelector('strong')?.textContent === 'Бесплатно' ? 0 : 0; // Default free
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('checkoutDelivery').textContent = deliveryCost.toLocaleString('ru-RU') + ' ₸';
            document.getElementById('checkoutTotal').textContent = (subtotal + deliveryCost - discount).toLocaleString('ru-RU') + ' ₸'; // Apply discount
        }

        // Payment Selection
        let selectedPaymentType = 'card';
        function selectPayment(element, type) {
            document.querySelectorAll('.payment-method').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedPaymentType = type;
        }

        // Proceed to Payment
        function proceedToPayment() {
            const orderNumber = Math.floor(100000000 + Math.random() * 900000000);
            const total = document.getElementById('checkoutTotal').textContent;
            
            document.getElementById('paymentOrderNumber').textContent = orderNumber;
            document.getElementById('paymentAmount').textContent = total;
            
            const paymentMethods = {
                'card': 'Оплата банковской картой',
                'kaspi': 'Kaspi Pay',
                'balance': 'Оплата с баланса',
                'invoice': 'Выставлен счет на оплату'
            };
            
            document.getElementById('selectedPaymentMethod').textContent = paymentMethods[selectedPaymentType];
            
            if (selectedPaymentType === 'card') {
                document.getElementById('cardPaymentForm').style.display = 'block';
            } else {
                document.getElementById('cardPaymentForm').style.display = 'none';
            }
            
            showScreen('payment');
        }

        // Complete Payment
        function completePayment() {
            const orderNumber = document.getElementById('paymentOrderNumber').textContent;
            document.getElementById('successOrderNumber').textContent = orderNumber;
            cart = []; // Clear cart after successful payment
            discount = 0; // Reset discount
            updateCartCount();
            showScreen('success');
        }

        // Account Sections
        function showAccountSection(section) {
            document.querySelectorAll('.account-menu-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.account-content-section').forEach(sec => sec.classList.remove('active'));
            
            // Use event.currentTarget to get the element that triggered the event
            event.currentTarget.classList.add('active'); 
            document.getElementById(section + 'Section').classList.add('active');
        }

        function toggleChatbot() {
            const chatbot = document.getElementById('chatbotWindow');
            chatbot.classList.toggle('active');
            
            if (chatbot.classList.contains('active')) {
                document.getElementById('chatInput').focus();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML += `
                <div class="chat-message user">
                    <div class="message-bubble">${message}</div>
                </div>
            `;
            
            input.value = '';
            
            // Simulate bot response
            setTimeout(() => {
                const responses = [
                    'Спасибо за ваш вопрос! Наш специалист свяжется с вами в ближайшее время.',
                    'Я передал ваш запрос менеджеру. Ожидайте звонка в течение 15 минут.',
                    'Для уточнения деталей вашего заказа, пожалуйста, позвоните нам по телефону +7 700 800-40-00'
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                messagesContainer.innerHTML += `
                    <div class="chat-message bot">
                        <div class="message-bubble">${randomResponse}</div>
                    </div>
                `;
                
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize SMS inputs auto-navigation
            const smsInputs = ['code1', 'code2', 'code3', 'code4'];
            smsInputs.forEach((id, index) => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', (e) => {
                        if (e.target.value.length === 1 && index < smsInputs.length - 1) {
                            document.getElementById(smsInputs[index + 1]).focus();
                        }
                    });
                    
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Backspace' && e.target.value === '' && index > 0) {
                            document.getElementById(smsInputs[index - 1]).focus();
                        }
                    });
                }
            });
        });



        // === ЛОГИКА КАРУСЕЛИ ===
let currentSlide = 0;
const slides = document.querySelectorAll('.carousel-slide');
const dots = document.querySelectorAll('.carousel-dot');
let slideInterval;

// Функция переключения на конкретный слайд
function goToSlide(n) {
    slides[currentSlide].classList.remove('active');
    dots[currentSlide].classList.remove('active');
    
    currentSlide = (n + slides.length) % slides.length; // Циклический переход
    
    slides[currentSlide].classList.add('active');
    dots[currentSlide].classList.add('active');
}

// Следующий слайд
function nextSlide() {
    goToSlide(currentSlide + 1);
    resetTimer();
}

// Предыдущий слайд
function prevSlide() {
    goToSlide(currentSlide - 1);
    resetTimer();
}

// Автоматическое переключение (таймер)
function resetTimer() {
    clearInterval(slideInterval);
    // Меняем слайд каждые 5 секунд
    slideInterval = setInterval(nextSlide, 5000);
}

// Функция прокрутки к фильтрам (для кнопки на баннере)
function scrollToFilters() {
    const filters = document.querySelector('.catalog-header');
    if (filters) {
        filters.scrollIntoView({ behavior: 'smooth' });
    }
}

// Инициализация карусели при загрузке
document.addEventListener('DOMContentLoaded', () => {
    if (slides.length > 0) {
        resetTimer(); // Запускаем таймер только если есть слайды
    }
        updateCartCount();

});
    </script>
</body>
</html>
